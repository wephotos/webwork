{"version":3,"sources":["webpack:///./src/views/Album.vue?d090","webpack:///./src/views/Album.vue?e040","webpack:///./node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/UploadOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/FileImageOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/FileImageOutlined.js","webpack:///./src/request/PhotoRequest.ts","webpack:///./src/views/Album.vue","webpack:///./src/views/Album.vue?b20d"],"names":["_hoisted_1","style","render","_ctx","_cache","$props","$setup","$data","$options","_component_a_button","_resolveComponent","_component_upload_outlined","_component_a_upload","_component_a_space","_component_a_layout_header","_component_a_empty","_component_a_image","_component_file_image_outlined","_component_edit_outlined","_component_delete_outlined","_component_a_popconfirm","_component_a_card","_component_a_image_preview_group","_component_a_input","_component_a_form_item","_component_a_textarea","_component_a_form","_component_a_modal","_component_a_layout_content","_component_a_layout","_openBlock","_createBlock","default","_withCtx","_createVNode","size","onClick","handleBack","_createTextVNode","_","name","action","accept","multiple","data","albumId","withCredentials","beforeUpload","onChange","handleUpload","photos","length","key","description","_createCommentVNode","_createElementBlock","_Fragment","_renderList","item","index","hoverable","id","cover","alt","preview","visible","src","photoSrc","$event","onView","actions","title","onCover","onEdit","onConfirm","onDelete","_createElementVNode","photo","photoInfoDialog","confirmLoading","onOk","onSavePhoto","ref","model","formData","rules","colon","span","label","value","placeholder","maxlength","rows","bordered","disabled","_objectSpread","target","i","arguments","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","obj","defineProperty","configurable","writable","props","context","p","attrs","AntdIcon","displayName","inheritAttrs","AlbumPhotoRequest","AxiosRequest","update","super","post","deletePhoto","photoId","get","listQuery","query","request","Album","Vue","constructor","args","current","onVisibleChange","this","required","message","max","mounted","Number","$route","then","res","code","error","msg","thumbObjectName","albumReq","setCover","success","formUnref","unref","formRef","validate","async","toRaw","catch","console","log","$router","back","_photo$thumbObjectNam","startsWith","file","_file$type","isLt5M","type","info","status","_info$file$response","_info$file$response2","response","push","__decorate","Options","components","EditOutlined","DeleteOutlined","UploadOutlined","FileImageOutlined","__exports__"],"mappings":"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","file":"resources/js/chunk-aed28342.881885c3.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Album.vue?vue&type=style&index=0&id=82a3913e&lang=scss&scoped=true\"","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-82a3913e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { style: {\"display\":\"none\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_upload_outlined = _resolveComponent(\"upload-outlined\")!\n  const _component_a_upload = _resolveComponent(\"a-upload\")!\n  const _component_a_space = _resolveComponent(\"a-space\")!\n  const _component_a_layout_header = _resolveComponent(\"a-layout-header\")!\n  const _component_a_empty = _resolveComponent(\"a-empty\")!\n  const _component_a_image = _resolveComponent(\"a-image\")!\n  const _component_file_image_outlined = _resolveComponent(\"file-image-outlined\")!\n  const _component_edit_outlined = _resolveComponent(\"edit-outlined\")!\n  const _component_delete_outlined = _resolveComponent(\"delete-outlined\")!\n  const _component_a_popconfirm = _resolveComponent(\"a-popconfirm\")!\n  const _component_a_card = _resolveComponent(\"a-card\")!\n  const _component_a_image_preview_group = _resolveComponent(\"a-image-preview-group\")!\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_textarea = _resolveComponent(\"a-textarea\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_modal = _resolveComponent(\"a-modal\")!\n  const _component_a_layout_content = _resolveComponent(\"a-layout-content\")!\n  const _component_a_layout = _resolveComponent(\"a-layout\")!\n\n  return (_openBlock(), _createBlock(_component_a_layout, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_a_layout_header, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_a_space, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_button, {\n                size: \"default\",\n                onClick: _ctx.handleBack\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"返回\")\n                ]),\n                _: 1\n              }, 8, [\"onClick\"]),\n              _createVNode(_component_a_upload, {\n                name: \"file\",\n                action: \"/album-photo/upload\",\n                accept: \"image/*\",\n                multiple: true,\n                data: {albumId: _ctx.albumId},\n                withCredentials: true,\n                \"show-upload-list\": false,\n                \"before-upload\": _ctx.beforeUpload,\n                onChange: _ctx.handleUpload\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_a_button, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_upload_outlined),\n                      _createTextVNode(\" 上传照片 \")\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"data\", \"before-upload\", \"onChange\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_a_layout_content, null, {\n        default: _withCtx(() => [\n          (_ctx.photos.length === 0)\n            ? (_openBlock(), _createBlock(_component_a_empty, {\n                key: 0,\n                description: null\n              }))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.photos, (item, index) => {\n            return (_openBlock(), _createBlock(_component_a_card, {\n              hoverable: \"\",\n              key: item.id\n            }, {\n              cover: _withCtx(() => [\n                _createVNode(_component_a_image, {\n                  alt: item.name,\n                  preview: { visible: false },\n                  src: _ctx.photoSrc(item),\n                  onClick: ($event: any) => (_ctx.onView(index))\n                }, null, 8, [\"alt\", \"src\", \"onClick\"])\n              ]),\n              actions: _withCtx(() => [\n                _createVNode(_component_file_image_outlined, {\n                  key: \"cover\",\n                  title: \"设为封面\",\n                  onClick: ($event: any) => (_ctx.onCover(item))\n                }, null, 8, [\"onClick\"]),\n                _createVNode(_component_edit_outlined, {\n                  key: \"edit\",\n                  title: \"编辑\",\n                  onClick: ($event: any) => (_ctx.onEdit(item))\n                }, null, 8, [\"onClick\"]),\n                _createVNode(_component_a_popconfirm, {\n                  title: \"您确定要删除这张照片吗？\",\n                  \"ok-text\": \"是\",\n                  \"cancel-text\": \"否\",\n                  onConfirm: ($event: any) => (_ctx.onDelete(item))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_delete_outlined, {\n                      key: \"delete\",\n                      title: \"删除照片\"\n                    })\n                  ]),\n                  _: 2\n                }, 1032, [\"onConfirm\"])\n              ]),\n              _: 2\n            }, 1024))\n          }), 128)),\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createVNode(_component_a_image_preview_group, { preview: _ctx.preview }, {\n              default: _withCtx(() => [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.photos, (photo) => {\n                  return (_openBlock(), _createBlock(_component_a_image, {\n                    key: photo.id,\n                    src: _ctx.photoSrc(photo)\n                  }, null, 8, [\"src\"]))\n                }), 128))\n              ]),\n              _: 1\n            }, 8, [\"preview\"])\n          ]),\n          _createVNode(_component_a_modal, {\n            visible: _ctx.photoInfoDialog.visible,\n            \"onUpdate:visible\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.photoInfoDialog.visible) = $event)),\n            title: _ctx.photoInfoDialog.title,\n            \"confirm-loading\": _ctx.photoInfoDialog.confirmLoading,\n            onOk: _ctx.onSavePhoto\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_form, {\n                ref: \"formRef\",\n                model: _ctx.formData,\n                rules: _ctx.rules,\n                colon: false,\n                \"label-col\": { span: 3 },\n                \"wrapper-col\": { span: 21 }\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_a_form_item, {\n                    label: \"名称\",\n                    name: \"name\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_a_input, {\n                        value: _ctx.formData.name,\n                        \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.formData.name) = $event)),\n                        placeholder: \"照片名称\",\n                        size: \"large\",\n                        \"show-count\": \"\",\n                        maxlength: 10\n                      }, null, 8, [\"value\"])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_a_form_item, {\n                    label: \"描述\",\n                    name: \"description\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_a_textarea, {\n                        value: _ctx.formData.description,\n                        \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.formData.description) = $event)),\n                        placeholder: \"照片描述\",\n                        rows: 4\n                      }, null, 8, [\"value\"])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_a_form_item, {\n                    label: \"地址\",\n                    name: \"address\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_a_input, {\n                        value: _ctx.photoSrc(_ctx.formData),\n                        bordered: false,\n                        disabled: true,\n                        placeholder: \"照片对象地址\"\n                      }, null, 8, [\"value\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"model\", \"rules\"])\n            ]),\n            _: 1\n          }, 8, [\"visible\", \"title\", \"confirm-loading\", \"onOk\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UploadOutlined = function UploadOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": UploadOutlinedSvg\n  }), null);\n};\n\nUploadOutlined.displayName = 'UploadOutlined';\nUploadOutlined.inheritAttrs = false;\nexport default UploadOutlined;","// This icon file is generated automatically.\nvar FileImageOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z\" } }] }, \"name\": \"file-image\", \"theme\": \"outlined\" };\nexport default FileImageOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport FileImageOutlinedSvg from \"@ant-design/icons-svg/es/asn/FileImageOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FileImageOutlined = function FileImageOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": FileImageOutlinedSvg\n  }), null);\n};\n\nFileImageOutlined.displayName = 'FileImageOutlined';\nFileImageOutlined.inheritAttrs = false;\nexport default FileImageOutlined;","import { AlbumPhoto } from '@/types/AlbumPhoto'\r\nimport AxiosRequest from './AxiosRequest'\r\n\r\n/** 照片接口请求 */\r\nexport class AlbumPhotoRequest extends AxiosRequest {\r\n    /** 更新照片信息 */\r\n    update(photo: AlbumPhoto) {\r\n        return super.post<boolean>('/album-photo/update', photo)\r\n    }\r\n\r\n    /** 删除照片 */\r\n    deletePhoto(photoId: number) {\r\n        return super.get<boolean>(`/album-photo/delete/${photoId}`)\r\n    }\r\n\r\n    /** 获取照片列表 */\r\n    listQuery(query: {albumId: number}) {\r\n        return super.post<AlbumPhoto[]>('/album-photo/list-query', query)\r\n    }\r\n}\r\nconst request = new AlbumPhotoRequest()\r\nexport default request\r\n","\r\nimport {\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  UploadOutlined,\r\n  FileImageOutlined\r\n} from '@ant-design/icons-vue'\r\nimport { AlbumPhoto } from '@/types/AlbumPhoto'\r\nimport { Options, Vue } from 'vue-class-component'\r\nimport request from '@/request/PhotoRequest'\r\nimport albumReq from '@/request/AlbumRequest'\r\nimport { message } from 'ant-design-vue'\r\nimport { ref, unref, toRaw } from 'vue'\r\nimport { ValidateErrorEntity } from 'ant-design-vue/lib/form/interface'\r\nimport { R } from '@/types/R'\r\n\r\n// 上传文件类型\r\ninterface FileItem {\r\n  uid: string;\r\n  name?: string;\r\n  status?: string;\r\n  response?: R<any>;\r\n  url?: string;\r\n  type?: string;\r\n  size: number;\r\n  originFileObj: any;\r\n}\r\n// 上传文件信息\r\ninterface FileInfo {\r\n  file: FileItem;\r\n  fileList: FileItem[];\r\n}\r\n\r\n@Options({\r\n  components: {\r\n    EditOutlined,\r\n    DeleteOutlined,\r\n    UploadOutlined,\r\n    FileImageOutlined\r\n  }\r\n})\r\nexport default class Album extends Vue {\r\n  // 表单引用\r\n  formRef = ref<AntType.Form>()\r\n  // 照片\r\n  photos: AlbumPhoto[] = []\r\n  // 照片预览\r\n  preview = {\r\n    visible: false,\r\n    current: 1,\r\n    onVisibleChange: (visible: boolean) => {\r\n      this.preview.visible = visible\r\n    }\r\n  }\r\n\r\n  // 照片弹框\r\n  photoInfoDialog = {\r\n    title: '照片信息',\r\n    visible: false,\r\n    confirmLoading: false\r\n  }\r\n\r\n  // 照片信息\r\n  formData: AlbumPhoto = {}\r\n\r\n  rules = {\r\n    name: [{ required: true, message: '照片名称不能为空' }, { max: 10, message: '照片名称最多10个字符' }],\r\n    description: [{ max: 100, message: '照片描述最多100个字符' }]\r\n  }\r\n\r\n  // 相册ID\r\n  albumId = 0\r\n\r\n  // 加载图片\r\n  mounted() {\r\n    this.albumId = Number(this.$route.query.albumId)\r\n    this.albumId && request.listQuery({ albumId: this.albumId }).then(res => {\r\n      if (res.code === 0) {\r\n        this.photos = res.data\r\n      } else {\r\n        message.error(res.msg)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 预览图片\r\n   * @param index 图片下标\r\n   */\r\n  onView(index: number) {\r\n    this.preview.visible = true\r\n    this.preview.current = index\r\n  }\r\n\r\n  /**\r\n   * 编辑照片\r\n   * @param photo 照片对象\r\n   */\r\n  onEdit(photo: AlbumPhoto) {\r\n    this.formData = { ...photo }\r\n    this.photoInfoDialog.visible = true\r\n  }\r\n\r\n  /**\r\n   * 将照片设为相册封面\r\n   * @param photo 照片\r\n   */\r\n  onCover(photo: AlbumPhoto) {\r\n    const cover = { cover: photo.thumbObjectName, albumId: this.albumId }\r\n    albumReq.setCover(cover).then(res => {\r\n      if (res.code === 0) {\r\n        message.success(`照片<${photo.name}>已设为相册封面`)\r\n      } else {\r\n        message.error(res.msg)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 删除照片\r\n   * @param photo 照片对象\r\n   */\r\n  onDelete(photo: AlbumPhoto) {\r\n    request.deletePhoto(photo.id as number).then(res => {\r\n      if (res.code !== 0) {\r\n        message.error(res.msg)\r\n      } else {\r\n        message.success('删除成功')\r\n        this.photos = this.photos.filter(item => item.id !== photo.id)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 保存照片信息\r\n   */\r\n  onSavePhoto() {\r\n    const formUnref = unref(this.formRef)\r\n    formUnref && formUnref.validate().then(async () => {\r\n        this.photos.forEach(item => {\r\n          if (item.id === this.formData.id) {\r\n            request.update(toRaw(this.formData)).then(res => {\r\n              if (res.code !== 0) {\r\n                message.error(res.msg)\r\n              } else {\r\n                item.name = this.formData.name\r\n                item.description = this.formData.description\r\n                this.photoInfoDialog.visible = false\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }).catch((error: ValidateErrorEntity<unknown>) => {\r\n        console.log('error', error)\r\n      })\r\n  }\r\n\r\n  /**\r\n   * 返回主页\r\n   */\r\n  handleBack() {\r\n    this.$router.back()\r\n  }\r\n\r\n  /**\r\n   * 返回照片可访问地址\r\n   * @param photo 照片对象\r\n   */\r\n  photoSrc(photo: AlbumPhoto) {\r\n    if (photo.thumbObjectName?.startsWith('http')) {\r\n      return photo.thumbObjectName\r\n    } else {\r\n      return '/file/download/' + photo.thumbObjectName\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 上传前验证\r\n   */\r\n  beforeUpload(file: FileItem) {\r\n    const isLt5M = file.size / 1024 / 1024 < 5\r\n    if (!isLt5M) {\r\n      message.error('上传照片不能大于 5MB!')\r\n    }\r\n    return isLt5M && file.type?.startsWith('image/')\r\n  }\r\n\r\n  /**\r\n   * 上传照片\r\n   */\r\n  handleUpload(info: FileInfo) {\r\n    if (info.file.status === 'uploading') {\r\n      return false\r\n    }\r\n    if (info.file.status === 'done') {\r\n      if (info.file.response?.code === 0) {\r\n        this.photos.push(info.file.response.data)\r\n      } else {\r\n        message.error(info.file.response?.msg as string)\r\n      }\r\n    }\r\n    if (info.file.status === 'error') {\r\n      message.error('上传失败')\r\n    }\r\n  }\r\n}\r\n","import { render } from \"./Album.vue?vue&type=template&id=82a3913e&scoped=true&ts=true\"\nimport script from \"./Album.vue?vue&type=script&lang=ts\"\nexport * from \"./Album.vue?vue&type=script&lang=ts\"\n\nimport \"./Album.vue?vue&type=style&index=0&id=82a3913e&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\devwork\\\\eclipse-workspace\\\\webwork\\\\webwork-web\\\\web-photos\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-82a3913e\"]])\n\nexport default __exports__"],"sourceRoot":""}