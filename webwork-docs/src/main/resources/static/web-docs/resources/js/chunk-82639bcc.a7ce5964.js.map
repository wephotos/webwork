{"version":3,"sources":["webpack:///./src/views/DocEdit.vue?9c24","webpack:///./src/views/DocEdit.vue?47d0","webpack:///./src/views/DocEdit.vue","webpack:///./src/views/DocEdit.vue?934d","webpack:///./src/views/DocEdit.vue?33e2"],"names":["class","style","name","layout","model","document","autocomplete","save","type","html-type","back","checked","open","rules","value","title","placeholder","maxlength","content","rows","showCount","onPreview","visible","preview","width","footer","wrap-class-name","previewMarkdown","docId","contentType","this","$route","query","Number","getDoc","ret","code","message","error","msg","data","$router","values","id","versionNo","success","warn","parse","renderer","Renderer","highlight","lang","language","getLanguage","langPrefix","pedantic","gfm","breaks","sanitize","smartypants","xhtml","components","render","__scopeId"],"mappings":"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","file":"resources/js/chunk-82639bcc.a7ce5964.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DocEdit.vue?vue&type=style&index=1&id=5b542bac&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DocEdit.vue?vue&type=style&index=0&id=5b542bac&lang=scss\"","<template>\r\n    <div class=\"content\">\r\n      <a-form\r\n        name=\"DocForm\"\r\n        layout=\"vertical\"\r\n        :model=\"document\"\r\n        autocomplete=\"off\"\r\n        @finish=\"save\"\r\n      >\r\n        <div style=\"text-align: right;margin-bottom: 25px;\">\r\n          <a-space>\r\n            <a-button type=\"primary\" html-type=\"submit\">保存</a-button>\r\n            <a-button @click=\"back\">返回</a-button>\r\n          </a-space>\r\n        </div>\r\n        <a-divider />\r\n        <a-form-item name=\"open\">\r\n          <a-checkbox v-model:checked=\"document.open\">公开文档</a-checkbox>\r\n        </a-form-item>\r\n        <a-form-item name=\"title\" :rules=\"[{ required: true, message: '请输入文档标题' }]\">\r\n          <a-input v-model:value=\"document.title\" placeholder=\"请输入文档标题\" :maxlength=\"50\" />\r\n        </a-form-item>\r\n        <a-form-item name=\"content\" :rules=\"[{ required: true, message: '请输入文档内容' }]\">\r\n          <span style=\"font-size: 12px; color: gray;\">请输入Markdown文本</span>\r\n          <a-textarea v-model:value=\"document.content\" placeholder=\"请输入文档内容 Markdown\"\r\n            :rows=\"20\" :maxlength=\"5000\" :showCount=\"true\" />\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-button @click=\"onPreview\">文档预览</a-button>\r\n        </a-form-item>\r\n    </a-form>\r\n    <a-modal\r\n      v-model:visible=\"preview\"\r\n      title=\"文档预览\"\r\n      width=\"100%\"\r\n      :footer=\"null\"\r\n      wrap-class-name=\"full-modal\"\r\n    >\r\n    <div class=\"markdown-body\" v-html=\"previewMarkdown\"></div>\r\n    </a-modal>\r\n    </div>\r\n</template>\r\n  <script lang=\"ts\">\r\n  import { Options, Vue } from 'vue-class-component'\r\n  import { message } from 'ant-design-vue'\r\n  import { Document } from '@/types/Document'\r\n  import request from '@/request/DocumentRequest'\r\n  import { marked } from 'marked'\r\n  import highlight from 'highlight.js'\r\n  import 'highlight.js/styles/default.css' // Code CSS\r\n  import 'github-markdown-css/github-markdown.css'\r\n\r\n  @Options({\r\n    components: {\r\n    }\r\n  })\r\n  export default class DocEdit extends Vue {\r\n    // 文档ID\r\n    docId = 0\r\n    document: Document = {\r\n      contentType: 1 // Markdown\r\n    }\r\n\r\n    // 文档预览\r\n    preview = false\r\n    previewMarkdown = ''\r\n    // 初始化\r\n    async mounted() {\r\n      if (!this.$route.query.docId) {\r\n        return false\r\n      }\r\n      this.docId = Number(this.$route.query.docId as string)\r\n      const ret = await request.getDoc(this.docId)\r\n      if (ret.code !== 0) {\r\n        message.error(ret.msg)\r\n      } else {\r\n        this.document = ret.data\r\n      }\r\n    }\r\n\r\n    // 返回上一步\r\n    back() {\r\n        this.$router.back()\r\n    }\r\n\r\n    // 保存文档\r\n    async save(values: any) {\r\n      // console.log(this.document, values)\r\n      const ret = await request.save(this.document)\r\n      if (ret.code === 0) {\r\n        this.document.id = ret.data.id\r\n        this.document.versionNo = ret.data.versionNo\r\n        message.success('保存成功')\r\n      } else {\r\n        message.error(ret.msg)\r\n      }\r\n    }\r\n\r\n    // 文档预览\r\n    onPreview() {\r\n      if (!this.document.content) {\r\n        message.warn('请输入内容后预览')\r\n        return false\r\n      }\r\n      this.preview = true\r\n      this.previewMarkdown = marked.parse(this.document.content as string, {\r\n        renderer: new marked.Renderer(),\r\n        highlight: function(code, lang) {\r\n          const language = highlight.getLanguage(lang) ? lang : 'plaintext'\r\n          return highlight.highlight(code, { language }).value\r\n        },\r\n        langPrefix: 'hljs language-', // highlight.js css expects a top-level 'hljs' class.\r\n        pedantic: false,\r\n        gfm: true,\r\n        breaks: false,\r\n        sanitize: false,\r\n        smartypants: false,\r\n        xhtml: false\r\n      })\r\n    }\r\n  }\r\n  </script>\r\n  <style lang=\"scss\">\r\n  .content {\r\n    padding: 20px 50px;\r\n  }\r\n  .full-modal .ant-modal {\r\n    max-width: 100%;\r\n    top: 0;\r\n    padding-bottom: 0;\r\n    margin: 0;\r\n  }\r\n  .full-modal .ant-modal-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: calc(100vh);\r\n  }\r\n  .full-modal .ant-modal-body {\r\n    flex: 1;\r\n    overflow: auto;\r\n  }\r\n\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n  .markdown-body {\r\n\t\tbox-sizing: border-box;\r\n\t\tmin-width: 200px;\r\n\t\tmax-width: 100%;\r\n    margin: 0 auto;\r\n\t}\r\n\r\n\t@media (max-width: 767px) {\r\n\t\t.markdown-body {\r\n\t\t\tpadding: 15px;\r\n\t\t}\r\n\t}\r\n</style>\r\n","\r\n  import { Options, Vue } from 'vue-class-component'\r\n  import { message } from 'ant-design-vue'\r\n  import { Document } from '@/types/Document'\r\n  import request from '@/request/DocumentRequest'\r\n  import { marked } from 'marked'\r\n  import highlight from 'highlight.js'\r\n  import 'highlight.js/styles/default.css' // Code CSS\r\n  import 'github-markdown-css/github-markdown.css'\r\n\r\n  @Options({\r\n    components: {\r\n    }\r\n  })\r\n  export default class DocEdit extends Vue {\r\n    // 文档ID\r\n    docId = 0\r\n    document: Document = {\r\n      contentType: 1 // Markdown\r\n    }\r\n\r\n    // 文档预览\r\n    preview = false\r\n    previewMarkdown = ''\r\n    // 初始化\r\n    async mounted() {\r\n      if (!this.$route.query.docId) {\r\n        return false\r\n      }\r\n      this.docId = Number(this.$route.query.docId as string)\r\n      const ret = await request.getDoc(this.docId)\r\n      if (ret.code !== 0) {\r\n        message.error(ret.msg)\r\n      } else {\r\n        this.document = ret.data\r\n      }\r\n    }\r\n\r\n    // 返回上一步\r\n    back() {\r\n        this.$router.back()\r\n    }\r\n\r\n    // 保存文档\r\n    async save(values: any) {\r\n      // console.log(this.document, values)\r\n      const ret = await request.save(this.document)\r\n      if (ret.code === 0) {\r\n        this.document.id = ret.data.id\r\n        this.document.versionNo = ret.data.versionNo\r\n        message.success('保存成功')\r\n      } else {\r\n        message.error(ret.msg)\r\n      }\r\n    }\r\n\r\n    // 文档预览\r\n    onPreview() {\r\n      if (!this.document.content) {\r\n        message.warn('请输入内容后预览')\r\n        return false\r\n      }\r\n      this.preview = true\r\n      this.previewMarkdown = marked.parse(this.document.content as string, {\r\n        renderer: new marked.Renderer(),\r\n        highlight: function(code, lang) {\r\n          const language = highlight.getLanguage(lang) ? lang : 'plaintext'\r\n          return highlight.highlight(code, { language }).value\r\n        },\r\n        langPrefix: 'hljs language-', // highlight.js css expects a top-level 'hljs' class.\r\n        pedantic: false,\r\n        gfm: true,\r\n        breaks: false,\r\n        sanitize: false,\r\n        smartypants: false,\r\n        xhtml: false\r\n      })\r\n    }\r\n  }\r\n  ","import { render } from \"./DocEdit.vue?vue&type=template&id=5b542bac&scoped=true\"\nimport script from \"./DocEdit.vue?vue&type=script&lang=ts\"\nexport * from \"./DocEdit.vue?vue&type=script&lang=ts\"\n\nimport \"./DocEdit.vue?vue&type=style&index=0&id=5b542bac&lang=scss\"\nimport \"./DocEdit.vue?vue&type=style&index=1&id=5b542bac&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5b542bac\"\n\nexport default script"],"sourceRoot":""}