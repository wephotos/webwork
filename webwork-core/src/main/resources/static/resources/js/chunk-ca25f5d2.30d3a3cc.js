(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca25f5d2"],{"00b8":function(e,t,a){},"0838":function(e,t,a){"use strict";var n=a("d4ec"),r=a("bee2"),c=a("45eb"),o=a("7e84"),u=a("262e"),i=a("2caf"),l=a("799e"),d=function(e){Object(u["a"])(a,e);var t=Object(i["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,[{key:"find",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"get",this).call(this,"/organization/get/".concat(e))}},{key:"delete",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"get",this).call(this,"/organization/delete/".concat(e))}},{key:"add",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"post",this).call(this,"/organization/add",e)}},{key:"update",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"post",this).call(this,"/organization/update",e)}},{key:"children",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(c["a"])(Object(o["a"])(a.prototype),"get",this).call(this,"/organization/children?parentId=".concat(e))}},{key:"deepTreeNodes",value:function(){return Object(c["a"])(Object(o["a"])(a.prototype),"get",this).call(this,"/organization/deep-tree-nodes")}}]),a}(l["a"]),s=new d;t["a"]=s},"4ebe":function(e,t,a){"use strict";var n=a("7a23"),r=Object(n["l"])("新增部门"),c=Object(n["l"])("新增单位"),o=Object(n["l"])("更新单位"),u=Object(n["l"])(" 删除单位 "),i=Object(n["l"])("新增人员"),l=Object(n["l"])("更新部门"),d=Object(n["l"])("删除部门");function s(e,t,a,s,b,f){var p=Object(n["K"])("a-menu-item"),O=Object(n["K"])("a-menu"),j=Object(n["K"])("a-dropdown"),m=Object(n["K"])("a-tree");return Object(n["C"])(),Object(n["j"])(m,{"load-data":e.onLoadData,"tree-data":e.treeData,expandedKeys:e.expandedKeys,"onUpdate:expandedKeys":t[2]||(t[2]=function(t){return e.expandedKeys=t}),draggable:"",onSelect:e.onSelect,style:{height:"100%"},onContextmenu:t[3]||(t[3]=Object(n["W"])((function(){}),["prevent"]))},{title:Object(n["U"])((function(a){return[Object(n["m"])(j,{trigger:["contextmenu"]},{overlay:Object(n["U"])((function(){return[Object(n["m"])(O,{onClick:function(t){var n=t.key;return e.onContextMenuClick(a,n)}},{default:Object(n["U"])((function(){return[1==a.type||0==a.type?(Object(n["C"])(),Object(n["j"])(n["b"],{key:0},[Object(n["m"])(p,{key:e.contextMenuKeys.ADD_DEPT},{default:Object(n["U"])((function(){return[r]})),_:1}),Object(n["m"])(p,{key:e.contextMenuKeys.ADD_GROUP},{default:Object(n["U"])((function(){return[c]})),_:1}),Object(n["m"])(p,{key:e.contextMenuKeys.UPDATE_GROUP},{default:Object(n["U"])((function(){return[o]})),_:1}),Object(n["m"])(p,{key:e.contextMenuKeys.DELETE_GROUP},{default:Object(n["U"])((function(){return[u]})),_:1})],64)):Object(n["k"])("",!0),2==a.type?(Object(n["C"])(),Object(n["j"])(n["b"],{key:1},[Object(n["m"])(p,{key:e.contextMenuKeys.ADD_USER},{default:Object(n["U"])((function(){return[i]})),_:1}),Object(n["m"])(p,{key:e.contextMenuKeys.UPDATE_DEPT},{default:Object(n["U"])((function(){return[l]})),_:1}),Object(n["m"])(p,{key:e.contextMenuKeys.DELETE_DEPT},{default:Object(n["U"])((function(){return[d]})),_:1})],64)):Object(n["k"])("",!0)]})),_:2},1032,["onClick"])]})),default:Object(n["U"])((function(){return[Object(n["m"])("span",{onContextmenu:t[1]||(t[1]=Object(n["W"])((function(){}),["prevent"]))},Object(n["M"])(a.title),33)]})),_:2},1024)]})),_:1},8,["load-data","tree-data","expandedKeys","onSelect"])}var b=a("2909"),f=a("1da1"),p=a("d4ec"),O=a("bee2"),j=a("262e"),m=a("2caf"),h=(a("d3b7"),a("a434"),a("b0c0"),a("d81d"),a("159b"),a("96cf"),a("9ab4")),y=a("ce1f"),v=a("f64c"),g=a("ed3b"),k=a("0838"),D=a("bbfa"),_=Object(n["l"])("是"),x=Object(n["l"])("否"),U=Object(n["l"])("提交"),w=Object(n["l"])("取消");function E(e,t,a,r,c,o){var u=Object(n["K"])("a-input"),i=Object(n["K"])("a-form-item"),l=Object(n["K"])("a-tree-select"),d=Object(n["K"])("a-radio"),s=Object(n["K"])("a-radio-group"),b=Object(n["K"])("a-switch"),f=Object(n["K"])("a-button"),p=Object(n["K"])("a-form");return Object(n["C"])(),Object(n["j"])(p,{ref:"formRef",model:e.formData,rules:e.rules,"label-col":{span:4},"wrapper-col":{span:18},style:{"margin-top":"15px"}},{default:Object(n["U"])((function(){return[Object(n["m"])(i,{label:"节点名称",name:"name"},{default:Object(n["U"])((function(){return[Object(n["m"])(u,{value:e.formData.name,"onUpdate:value":t[1]||(t[1]=function(t){return e.formData.name=t})},null,8,["value"])]})),_:1}),e.isTop?Object(n["k"])("",!0):(Object(n["C"])(),Object(n["j"])(i,{key:0,label:"上级单位",name:"parentId"},{default:Object(n["U"])((function(){return[Object(n["m"])(l,{value:e.formData.parentId,"onUpdate:value":t[2]||(t[2]=function(t){return e.formData.parentId=t}),defaultValue:e.formData.parentName,disabled:!!e.id,"tree-data":e.treeData,"load-data":e.onLoadData,onTreeExpand:e.onSelectTreeExpand,"tree-default-expand-all":"",style:{width:"100%"},placeholder:"请选择上级单位","dropdown-style":{maxHeight:"400px",overflow:"auto"}},null,8,["value","defaultValue","disabled","tree-data","load-data","onTreeExpand"])]})),_:1})),e.isTop||1!=e.type?Object(n["k"])("",!0):(Object(n["C"])(),Object(n["j"])(i,{key:1,label:"虚拟节点",name:"virtual"},{default:Object(n["U"])((function(){return[Object(n["m"])(s,{value:e.formData.virtual,"onUpdate:value":t[3]||(t[3]=function(t){return e.formData.virtual=t})},{default:Object(n["U"])((function(){return[Object(n["m"])(d,{value:!0},{default:Object(n["U"])((function(){return[_]})),_:1}),Object(n["m"])(d,{value:!1},{default:Object(n["U"])((function(){return[x]})),_:1})]})),_:1},8,["value"])]})),_:1})),e.isTop?Object(n["k"])("",!0):(Object(n["C"])(),Object(n["j"])(i,{key:2,label:"节点状态",name:"enabled"},{default:Object(n["U"])((function(){return[Object(n["m"])(b,{checked:e.formData.enabled,"onUpdate:checked":t[4]||(t[4]=function(t){return e.formData.enabled=t})},null,8,["checked"])]})),_:1})),Object(n["m"])(i,{"wrapper-col":{span:14,offset:4}},{default:Object(n["U"])((function(){return[Object(n["m"])(f,{type:"primary",onClick:e.onSubmit},{default:Object(n["U"])((function(){return[U]})),_:1},8,["onClick"]),Object(n["m"])(f,{style:{"margin-left":"10px"},onClick:e.onCancel},{default:Object(n["U"])((function(){return[w]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])}var T=a("5530"),C=(a("7db0"),a("a9e3"),a("a1e9")),K=function(e){Object(j["a"])(a,e);var t=Object(m["a"])(a);function a(){var e;return Object(p["a"])(this,a),e=t.apply(this,arguments),e.treeData=[],e.formData={id:e.id,enabled:!0,virtual:!1,parentId:e.parentId,parentName:e.parentName},e.formRef=Object(C["k"])(),e.rules={name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:50,message:"名称最多50个字符"}],parentId:[{required:!0,message:"请选择上级单位",trigger:"blur"}]},e}return Object(O["a"])(a,[{key:"isTop",get:function(){return!(this.parentId||this.formData.parentId)}},{key:"mounted",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].deepTreeNodes();case 2:if(t=e.sent,0===t.code){e.next=6;break}return v["a"].error(t.msg),e.abrupt("return",!1);case 6:if(this.treeData=this.toAntTreeNodes(t.data),!this.id){e.next=15;break}return e.next=10,k["a"].find(this.id);case 10:if(a=e.sent,0===a.code){e.next=14;break}return v["a"].error(a.msg),e.abrupt("return",!1);case 14:this.formData=Object(T["a"])(Object(T["a"])({},this.formData),a.data);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onLoadData",value:function(e){var t=this;return new Promise((function(a){if(e.dataRef.children)return a(),!1;k["a"].children(e.dataRef.key).then((function(n){e.dataRef.children=t.toChildren(n),t.treeData=Object(b["a"])(t.treeData),a()}))}))}},{key:"onSelectTreeExpand",value:function(e){console.log(e)}},{key:"onSubmit",value:function(){var e=this,t=Object(C["u"])(this.formRef);t&&t.validate().then(Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=Object(T["a"])({},Object(C["p"])(e.formData)),a.type=a.virtual?0:e.type,a.status=a.enabled?1:0,delete a.virtual,delete a.enabled,!e.id){t.next=11;break}return t.next=8,k["a"].update(a);case 8:n=t.sent,t.next=15;break;case 11:return t.next=13,k["a"].add(a);case 13:n=t.sent,a.id=n.data;case 15:0!==n.code?v["a"].error("错误:".concat(n.msg)):e.dialog._ok(a);case 16:case"end":return t.stop()}}),t)})))).catch((function(e){console.log("error",e)}))}},{key:"onCancel",value:function(){this.dialog._close()}},{key:"toChildren",value:function(e){return e.data.map((function(e){return{key:e.id,type:e.type,value:e.id,title:e.name,code:e.code,isLeaf:2===e.type,selectable:1===e.type}}))}},{key:"toAntTreeNodes",value:function(e){var t=this;return e.map((function(e){return{key:e.id,type:e.type,value:e.id,title:e.name,code:e.code,isLeaf:2===e.type,selectable:1===e.type,children:t.toAntTreeNodes(e.children)}}))}}]),a}(y["b"]);K=Object(h["a"])([Object(y["a"])({props:{id:{type:String},type:{type:Number},parentId:{type:String},parentName:{type:String},dialog:Object}})],K);var R=K;R.render=E;var P,I=R;(function(e){e[e["ADD_USER"]=0]="ADD_USER",e[e["ADD_DEPT"]=1]="ADD_DEPT",e[e["ADD_GROUP"]=2]="ADD_GROUP",e[e["UPDATE_DEPT"]=3]="UPDATE_DEPT",e[e["UPDATE_GROUP"]=4]="UPDATE_GROUP",e[e["DELETE_DEPT"]=5]="DELETE_DEPT",e[e["DELETE_GROUP"]=6]="DELETE_GROUP"})(P||(P={}));var L=function(e){Object(j["a"])(a,e);var t=Object(m["a"])(a);function a(){var e;return Object(p["a"])(this,a),e=t.apply(this,arguments),e.treeData=[],e.expandedKeys=[],e.contextMenuKeys=P,e}return Object(O["a"])(a,[{key:"mounted",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].children();case 2:if(t=e.sent,0===t.code){e.next=6;break}return v["a"].error(t.msg),e.abrupt("return",!1);case 6:this.treeData=this.toChildren(t);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onLoadData",value:function(e){var t=this;return new Promise((function(a){if(e.dataRef.children)return a(),!1;k["a"].children(e.dataRef.key).then((function(n){e.dataRef.children=t.toChildren(n),t.treeData=Object(b["a"])(t.treeData),a()}))}))}},{key:"onSelect",value:function(e,t){this.$emit("select",e,t)}},{key:"onContextMenuClick",value:function(e,t){var a,n,r=this;if(P.ADD_DEPT===t)a="新增部门",n={type:2,parentId:e.key,parentName:e.title};else if(P.ADD_GROUP===t)a="新增单位",n={type:1,parentId:e.key,parentName:e.title};else if(P.UPDATE_DEPT===t)a="更新部门",n={type:2,id:e.key};else{if(P.UPDATE_GROUP!==t)return P.DELETE_DEPT===t||P.DELETE_GROUP===t?(g["a"].confirm({title:"您确定要删除<".concat(e.title,">吗?"),okType:"danger",onOk:function(){k["a"].delete(e.key).then((function(t){0===t.code?(v["a"].success("删除成功"),r.loop(r.treeData,e.key,(function(e,t,a){a.splice(t,1)}))):v["a"].error("删除失败:"+t.msg)})).catch((function(e){v["a"].error(e.message)}))}}),!1):P.ADD_USER===t?(this.$dialog({title:"新增用户",width:550,height:650,max:!1,content:{handle:!0,component:D["a"],props:{deptId:e.key,deptName:name}},ok:function(){return r.$emit("select",[e.key],{node:{dataRef:{code:e.code}}}),!0}}),!1):(console.log("unknow menukey ".concat(t)),!1);a="更新单位",n={type:1,id:e.key}}this.$dialog({title:a,width:550,height:400,content:{handle:!0,props:n,component:I},ok:function(t){var a=t[0];return e.key===a.id?e.dataRef.title=a.name:e.key===a.parentId?e.dataRef.children?e.dataRef.children.push(r.dataToTreeDataItem(a)):r.onLoadData(e):r.loop(r.treeData,a.parentId,(function(e,t,n){e.children&&e.children.push(r.dataToTreeDataItem(a))})),!0}})}},{key:"watchExpandedKeys",value:function(e,t){console.log("expandedKeys",e,t)}},{key:"toChildren",value:function(e){var t=this;return e.data.map((function(e){return t.dataToTreeDataItem(e)}))}},{key:"dataToTreeDataItem",value:function(e){return{key:e.id,type:e.type,title:e.name,code:e.code,isLeaf:2===e.type}}},{key:"loop",value:function(e,t,a){var n=this;e.forEach((function(e,r,c){return e.key===t?a(e,r,c):e.children?n.loop(e.children,t,a):void 0}))}}]),a}(y["b"]);L=Object(h["a"])([Object(y["a"])({emits:["select"]})],L);var A=L;A.render=s;t["a"]=A},"713b":function(e,t,a){"use strict";var n=a("d4ec"),r=a("bee2"),c=a("45eb"),o=a("7e84"),u=a("262e"),i=a("2caf"),l=(a("99af"),a("799e")),d=function(e){Object(u["a"])(a,e);var t=Object(i["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,[{key:"find",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"get",this).call(this,"/user/get/".concat(e))}},{key:"delete",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"get",this).call(this,"/user/delete/".concat(e))}},{key:"add",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"post",this).call(this,"/user/add",e)}},{key:"update",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"post",this).call(this,"/user/update",e)}},{key:"top",value:function(e,t){return Object(c["a"])(Object(o["a"])(a.prototype),"get",this).call(this,"/user/top?userId=".concat(e,"&deptId=").concat(t))}},{key:"pageList",value:function(e){return Object(c["a"])(Object(o["a"])(a.prototype),"post",this).call(this,"/user/page",e)}}]),a}(l["a"]),s=new d;t["a"]=s},a434:function(e,t,a){"use strict";var n=a("23e7"),r=a("23cb"),c=a("a691"),o=a("50c4"),u=a("7b0b"),i=a("65f0"),l=a("8418"),d=a("1dde"),s=d("splice"),b=Math.max,f=Math.min,p=9007199254740991,O="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!s},{splice:function(e,t){var a,n,d,s,j,m,h=u(this),y=o(h.length),v=r(e,y),g=arguments.length;if(0===g?a=n=0:1===g?(a=0,n=y-v):(a=g-2,n=f(b(c(t),0),y-v)),y+a-n>p)throw TypeError(O);for(d=i(h,n),s=0;s<n;s++)j=v+s,j in h&&l(d,s,h[j]);if(d.length=n,a<n){for(s=v;s<y-n;s++)j=s+n,m=s+a,j in h?h[m]=h[j]:delete h[m];for(s=y;s>y-n+a;s--)delete h[s-1]}else if(a>n)for(s=y-n;s>v;s--)j=s+n-1,m=s+a-1,j in h?h[m]=h[j]:delete h[m];for(s=0;s<a;s++)h[s+v]=arguments[s+2];return h.length=y-n+a,d}})},bbfa:function(e,t,a){"use strict";a("b0c0");var n=a("7a23"),r=Object(n["X"])("data-v-58b2e687");Object(n["G"])("data-v-58b2e687");var c={key:1},o=Object(n["m"])("div",{class:"ant-upload-text"},"Upload",-1),u=Object(n["l"])("保存"),i=Object(n["l"])("取消");Object(n["D"])();var l=r((function(e,t,a,l,d,s){var b=Object(n["K"])("a-col"),f=Object(n["K"])("loading-outlined"),p=Object(n["K"])("plus-outlined"),O=Object(n["K"])("a-upload"),j=Object(n["K"])("UserOutlined"),m=Object(n["K"])("a-input"),h=Object(n["K"])("a-form-item"),y=Object(n["K"])("LockOutlined"),v=Object(n["K"])("a-row"),g=Object(n["K"])("MobileOutlined"),k=Object(n["K"])("MailOutlined"),D=Object(n["K"])("a-tree-select"),_=Object(n["K"])("a-switch"),x=Object(n["K"])("a-button"),U=Object(n["K"])("a-form");return Object(n["C"])(),Object(n["j"])(U,{ref:"formRef",colon:!1,model:e.user,rules:e.rules,"label-col":{span:4},"wrapper-col":{span:18}},{default:r((function(){return[Object(n["m"])(v,{type:"flex",gutter:8,style:{margin:"0px"}},{default:r((function(){return[Object(n["m"])(b,{span:4}),Object(n["m"])(b,{span:6},{default:r((function(){return[Object(n["m"])(O,{name:"file",data:e.avatarData,"list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,action:"/file/upload",withCredentials:!0,onChange:e.handleUploadChange,"before-upload":e.beforeUpload},{default:r((function(){return[e.user.avatar?(Object(n["C"])(),Object(n["j"])("img",{key:e.avatarKey,src:e.avatarUrl,alt:"头像"},null,8,["src"])):(Object(n["C"])(),Object(n["j"])("div",c,[e.avatarLoading?(Object(n["C"])(),Object(n["j"])(f,{key:0})):(Object(n["C"])(),Object(n["j"])(p,{key:1})),o]))]})),_:1},8,["data","onChange","before-upload"])]})),_:1}),Object(n["m"])(b,{span:12},{default:r((function(){return[Object(n["m"])(h,{"wrapper-col":{flex:"auto"},name:"name"},{default:r((function(){return[Object(n["m"])(m,{value:e.user.name,"onUpdate:value":t[1]||(t[1]=function(t){return e.user.name=t}),placeholder:"姓名"},{prefix:r((function(){return[Object(n["m"])(j,{style:{color:"rgba(0, 0, 0, 0.25)"}})]})),_:1},8,["value"])]})),_:1}),Object(n["m"])(h,{"wrapper-col":{flex:"auto"},name:"account"},{default:r((function(){return[Object(n["m"])(m,{value:e.user.account,"onUpdate:value":t[2]||(t[2]=function(t){return e.user.account=t}),placeholder:"账号"},{prefix:r((function(){return[Object(n["m"])(j,{style:{color:"rgba(0, 0, 0, 0.25)"}})]})),_:1},8,["value"])]})),_:1}),Object(n["m"])(h,{"wrapper-col":{flex:"auto"},name:"password"},{default:r((function(){return[Object(n["m"])(m,{value:e.user.password,"onUpdate:value":t[3]||(t[3]=function(t){return e.user.password=t}),type:"password",placeholder:"密码"},{prefix:r((function(){return[Object(n["m"])(y,{style:{color:"rgba(0, 0, 0, 0.25)"}})]})),_:1},8,["value"])]})),_:1})]})),_:1})]})),_:1}),Object(n["m"])(h,{label:"手机",name:"phone"},{default:r((function(){return[Object(n["m"])(m,{value:e.user.phone,"onUpdate:value":t[4]||(t[4]=function(t){return e.user.phone=t}),placeholder:"手机"},{prefix:r((function(){return[Object(n["m"])(g,{style:{color:"rgba(0, 0, 0, 0.25)"}})]})),_:1},8,["value"])]})),_:1}),Object(n["m"])(h,{label:"邮箱",name:"email"},{default:r((function(){return[Object(n["m"])(m,{value:e.user.email,"onUpdate:value":t[5]||(t[5]=function(t){return e.user.email=t}),placeholder:"邮箱"},{prefix:r((function(){return[Object(n["m"])(k,{style:{color:"rgba(0, 0, 0, 0.25)"}})]})),_:1},8,["value"])]})),_:1}),Object(n["m"])(h,{label:"职务"},{default:r((function(){return[Object(n["m"])(m,{value:e.user.post,"onUpdate:value":t[6]||(t[6]=function(t){return e.user.post=t}),placeholder:"职务"},{prefix:r((function(){return[Object(n["m"])(j,{style:{color:"rgba(0, 0, 0, 0.25)"}})]})),_:1},8,["value"])]})),_:1}),Object(n["m"])(h,{label:"部门"},{default:r((function(){return[e.treeData.length?(Object(n["C"])(),Object(n["j"])(D,{key:0,"tree-data":e.treeData,"load-data":e.onLoadData,value:e.user.deptId,"onUpdate:value":t[7]||(t[7]=function(t){return e.user.deptId=t}),"tree-default-expand-all":"",style:{width:"100%"},placeholder:"请选择用户部门","dropdown-style":{maxHeight:"400px",overflow:"auto"}},null,8,["tree-data","load-data","value"])):Object(n["k"])("",!0)]})),_:1}),Object(n["m"])(h,{label:"状态"},{default:r((function(){return[Object(n["m"])(_,{checked:1==e.user.status,onClick:e.handleUserStatus},null,8,["checked","onClick"])]})),_:1}),Object(n["m"])(h,{"wrapper-col":{span:14,offset:4}},{default:r((function(){return[Object(n["m"])(x,{type:"primary",onClick:e.onSubmit},{default:r((function(){return[u]})),_:1},8,["onClick"]),Object(n["m"])(x,{style:{"margin-left":"10px"},onClick:e.onCancel},{default:r((function(){return[i]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])})),d=a("2909"),s=a("1da1"),b=a("d4ec"),f=a("bee2"),p=a("262e"),O=a("2caf"),j=(a("96cf"),a("7db0"),a("d3b7"),a("d81d"),a("9ab4")),m=a("ce1f"),h=a("edc4"),y=a("6a86"),v=a("e8db"),g=a("cc68"),k=a("47ce"),D=a("8fe6"),_=a("713b"),x=a("0838"),U=a("f64c"),w=function(e){Object(p["a"])(a,e);var t=Object(O["a"])(a);function a(){var e;return Object(b["a"])(this,a),e=t.apply(this,arguments),e.user={status:1,deptId:e.deptId},e.avatarKey=Math.random(),e.avatarLoading=!1,e.treeData=[],e.formRef=Object(n["I"])(),e.rules={name:[{required:!0,message:"请输入姓名",trigger:"blur"},{max:20,message:"最多输入20个字符"}],account:[{required:!0,message:"请输入账号",trigger:"blur"},{max:20,message:"最多输入20个字符"}],post:[{max:20,message:"最多输入20个字符"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码为6-15位字符串",trigger:"blur"}],phone:[{pattern:/^1[0-9]{10}$/,message:"手机号码错误",trigger:"blur"}],email:[{pattern:/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$/,message:"邮箱地址错误",trigger:"blur"},{max:50,message:"最多输入50个字符"}]},e.handleUploadChange=function(t){if("uploading"===t.file.status)return e.avatarLoading=!0,!1;var a,n;(e.avatarLoading=!1,"done"===t.file.status)&&(0===(null===(a=t.file.response)||void 0===a?void 0:a.code)?(e.user.avatar=t.file.response.data.objectName,e.avatarKey=Math.random()):U["a"].error(null===(n=t.file.response)||void 0===n?void 0:n.msg));"error"===t.file.status&&U["a"].error("上传失败")},e}return Object(f["a"])(a,[{key:"avatarUrl",get:function(){return"/file/download/thumb/".concat(this.user.avatar)}},{key:"avatarData",get:function(){return{objectName:this.user.avatar||""}}},{key:"beforeUpload",value:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||U["a"].error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||U["a"].error("Image must smaller than 2MB!"),t&&a}},{key:"mounted",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x["a"].children();case 2:t=e.sent,0===t.code?this.treeData=this.toChildren(t):U["a"].error(t.msg),this.id&&_["a"].find(this.id).then((function(e){0===e.code?a.user=e.data:U["a"].error(e.msg)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onLoadData",value:function(e){var t=this;return new Promise((function(a){if(e.dataRef.children)return a(),!1;x["a"].children(e.dataRef.key).then((function(n){e.dataRef.children=t.toChildren(n),t.treeData=Object(d["a"])(t.treeData),a(),t.user.deptId=t.user.deptId||""}))}))}},{key:"onSubmit",value:function(){var e=this,t=Object(n["Q"])(this.formRef);t&&t.validate().then(Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.id){t.next=6;break}return t.next=3,_["a"].add(Object(n["N"])(e.user));case 3:a=t.sent,t.next=9;break;case 6:return t.next=8,_["a"].update(Object(n["N"])(e.user));case 8:a=t.sent;case 9:0===a.code?e.dialog._ok():U["a"].error(a.msg);case 10:case"end":return t.stop()}}),t)})))).catch((function(e){console.log("error",e)}))}},{key:"onCancel",value:function(){this.dialog._close()}},{key:"handleUserStatus",value:function(){this.user.status=1===this.user.status?0:1}},{key:"toChildren",value:function(e){return e.data.map((function(e){return{key:e.id,type:e.type,value:e.id,title:e.name,code:e.code,isLeaf:2===e.type,selectable:2===e.type}}))}}]),a}(m["b"]);w=Object(j["a"])([Object(m["a"])({components:{UserOutlined:h["a"],LockOutlined:y["a"],MobileOutlined:v["a"],MailOutlined:g["a"],PlusOutlined:k["a"],LoadingOutlined:D["a"]},props:{id:{type:String},deptId:{type:String},dialog:Object}})],w);var E=w;a("e29c");E.render=l,E.__scopeId="data-v-58b2e687";t["a"]=E},e29c:function(e,t,a){"use strict";a("00b8")}}]);
//# sourceMappingURL=chunk-ca25f5d2.30d3a3cc.js.map