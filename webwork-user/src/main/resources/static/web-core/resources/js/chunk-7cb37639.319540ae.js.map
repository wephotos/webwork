{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.map.js","webpack:///./src/request/ResRequest.ts","webpack:///./node_modules/core-js/internals/collection-strong.js","webpack:///./src/views/ResourceForm.vue?1517","webpack:///./node_modules/core-js/internals/collection.js","webpack:///./src/views/Resource.vue?b993","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./src/views/Resource.vue","webpack:///./src/views/ResourceForm.vue","webpack:///./src/views/ResourceForm.vue?cf18","webpack:///./src/views/ResourceForm.vue?a241","webpack:///./src/views/Resource.vue?cf12","webpack:///./src/views/Resource.vue?7acb","webpack:///./node_modules/core-js/internals/internal-metadata.js"],"names":["collection","collectionStrong","module","exports","init","this","arguments","length","undefined","ResRequest","id","entity","pageable","params","roleId","request","defineProperty","f","create","redefineAll","bind","anInstance","iterate","defineIterator","setSpecies","DESCRIPTORS","fastKey","InternalStateModule","setInternalState","set","internalStateGetterFor","getterFor","getConstructor","wrapper","CONSTRUCTOR_NAME","IS_MAP","ADDER","C","that","iterable","type","index","first","last","size","AS_ENTRIES","getInternalState","define","key","value","previous","state","entry","getEntry","next","removed","prototype","clear","data","prev","forEach","callbackfn","boundFunction","has","get","add","setStrong","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","iterated","kind","target","done","$","global","isForced","redefine","InternalMetadataModule","isObject","fails","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","indexOf","IS_WEAK","NativeConstructor","NativePrototype","Constructor","exported","fixMethod","KEY","nativeMethod","call","REPLACE","entries","REQUIRED","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","constructor","forced","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","proto","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","TypeError","Object","isExtensible","preventExtensions","style","class","load-data","onLoadData","tree-data","treeData","draggable","onSelect","title","trigger","overlay","menuKey","onContextMenuClick","node","contextMenuKeys","ADD_APP","ADD_MOD","ADD_FUN","UPDATE_APP","DELETE_APP","UPDATE_MOD","DELETE_MOD","UPDATE_FUN","DELETE_FUN","rowKey","columns","data-source","resources","rowClassName","pagination","handleTableChange","typeRender","record","filterDropdown","ref","placeholder","column","selectedKeys","handleSearch","confirm","dataIndex","icon","handleReset","clearFilters","filterIcon","filtered","name","text","searchText","searchedColumn","fragment","i","toLowerCase","colon","model","formData","rules","label-col","wrapper-col","label","iconData","list-type","show-upload-list","action","withCredentials","handleUploadChange","before-upload","beforeUpload","iconKey","src","iconUrl","alt","iconLoading","permission","url","remark","checked","onSubmit","onCancel","parentId","parentType","formRef","required","message","random","info","file","status","response","code","objectName","error","msg","isJpgOrPng","isLt2M","find","ret","formUnref","validate","then","update","dialog","_ok","catch","console","log","_close","components","UserOutlined","LockOutlined","MobileOutlined","MailOutlined","PlusOutlined","LoadingOutlined","props","Number","parentName","String","render","__scopeId","ContextMenuKeys","orderMap","ascend","descend","width","customRender","curr","slots","onFilterDropdownVisibleChange","visible","setTimeout","searchInput","focus","sorter","total","current","pageSize","condition","listNodes","toTreeDataItem","pageQuery","treeNode","Promise","resolve","dataRef","children","rawId","okType","onOk","delete","res","success","loop","item","arr","err","titleMap","Map","TreeNodeType","APP","MODULE","FUNCTION","$dialog","height","content","handle","component","ok","args","pKey","push","toTreeDataItemOne","nodes","map","isLeaf","callback","pageList","result","count","pag","filters","sortField","columnKey","sortOrder","order","Array","resource","SearchOutlined","hiddenKeys","uid","FREEZING","METADATA","setMetadata","it","objectID","weakData","getWeakData","onFreeze","meta"],"mappings":"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","file":"resources/js/chunk-7cb37639.319540ae.js","sourcesContent":["'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\nmodule.exports = collection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","import Page from '@/types/Page'\r\nimport Pageable from '@/types/Pageable'\r\nimport { Resource } from '@/types/Resource'\r\nimport { TreeNode } from '@/types/TreeNode'\r\nimport { TreeNodeQuery } from '@/types/TreeNodeQuery'\r\nimport BaseRequest from './BaseRequest'\r\n\r\n/** 资源请求 */\r\nexport class ResRequest extends BaseRequest {\r\n    /** 查询 */\r\n    find(id: number) {\r\n        return super.get<Resource>(`/resource/get/${id}`)\r\n    }\r\n\r\n    /** 删除 */\r\n    delete(id: number) {\r\n        return super.get(`/resource/delete/${id}`)\r\n    }\r\n\r\n    /** 添加资源 */\r\n    add(entity: Resource) {\r\n        return super.post('/resource/add', entity)\r\n    }\r\n\r\n    /** 更新资源 */\r\n    update(entity: Resource) {\r\n        return super.post('/resource/update', entity)\r\n    }\r\n    \r\n    /** 分页查询 */\r\n    pageList(pageable: Pageable) {\r\n        return super.post<Page<Resource>>('/resource/page', pageable)\r\n    }\r\n\r\n    /** 获取权限子节点 */\r\n    listNodes(params: TreeNodeQuery) {\r\n        return super.post<TreeNode[]>('/resource/list-nodes', params)\r\n    }\r\n\r\n    /** 获取全部树节点，包含自己 */\r\n    deepListNodes(params: TreeNodeQuery) {\r\n        return super.post<TreeNode[]>('/resource/deep-tree-nodes', params)\r\n    }\r\n\r\n    /** 获取角色下全部资源 */\r\n    listByRoleId(roleId: number) {\r\n        return super.get<Resource[]>(`/resource/list-by-role?roleId=${roleId}`)\r\n    }\r\n}\r\nconst request = new ResRequest()\r\nexport default request\r\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.1.3.6 Map.prototype.get(key)\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // 23.1.3.9 Map.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // 23.2.3.1 Set.prototype.add(value)\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(C.prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return C;\n  },\n  setStrong: function (C, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    defineIterator(C, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ResourceForm.vue?vue&type=style&index=0&id=78e94540&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var nativeMethod = NativePrototype[KEY];\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        nativeMethod.call(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        nativeMethod.call(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    typeof NativeConstructor != 'function' || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.REQUIRED = true;\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, Constructor, CONSTRUCTOR_NAME);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Resource.vue?vue&type=style&index=0&id=497680b9&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","<template>\r\n  <a-layout class=\"a-layout\">\r\n    <a-layout-sider class=\"a-layout-sider\" @contextmenu.prevent>\r\n      <a-tree\r\n        :load-data=\"onLoadData\"\r\n        :tree-data=\"treeData\"\r\n        draggable\r\n        @select=\"onSelect\"\r\n        style=\"height: 100%\"\r\n        @contextmenu.prevent\r\n      >\r\n        <template #title=\"node\">\r\n          <a-dropdown :trigger=\"['contextmenu']\">\r\n            <span @contextmenu.prevent>{{ node.title }}</span>\r\n            <template #overlay>\r\n              <a-menu\r\n                @click=\"({ key: menuKey }) => onContextMenuClick(node, menuKey)\"\r\n              >\r\n                <!-- 单位菜单 -->\r\n                <template v-if=\"node.type == 1\">\r\n                  <a-menu-item :key=\"contextMenuKeys.ADD_APP\"\r\n                    >新建应用</a-menu-item\r\n                  >\r\n                </template>\r\n                <!-- 应用菜单 -->\r\n                <template v-if=\"node.type == 20\">\r\n                  <a-menu-item :key=\"contextMenuKeys.ADD_MOD\"\r\n                    >新建模块</a-menu-item\r\n                  >\r\n                  <a-menu-item :key=\"contextMenuKeys.ADD_FUN\"\r\n                    >新建功能</a-menu-item\r\n                  >\r\n                  <a-menu-item :key=\"contextMenuKeys.UPDATE_APP\"\r\n                    >更新应用</a-menu-item\r\n                  >\r\n                  <a-menu-item :key=\"contextMenuKeys.DELETE_APP\"\r\n                    >删除应用</a-menu-item\r\n                  >\r\n                </template>\r\n                <!-- 模块菜单 -->\r\n                <template v-if=\"node.type == 21\">\r\n                  <a-menu-item :key=\"contextMenuKeys.ADD_FUN\"\r\n                    >新建功能</a-menu-item\r\n                  >\r\n                  <a-menu-item :key=\"contextMenuKeys.UPDATE_MOD\"\r\n                    >更新模块</a-menu-item\r\n                  >\r\n                  <a-menu-item :key=\"contextMenuKeys.DELETE_MOD\"\r\n                    >删除模块</a-menu-item\r\n                  >\r\n                  <a-menu-item :key=\"contextMenuKeys.ADD_MOD\"\r\n                    >新建子模块</a-menu-item\r\n                  >\r\n                </template>\r\n                <!-- 功能菜单 -->\r\n                <template v-if=\"node.type == 22\">\r\n                  <a-menu-item :key=\"contextMenuKeys.UPDATE_FUN\"\r\n                    >更新功能</a-menu-item\r\n                  >\r\n                  <a-menu-item :key=\"contextMenuKeys.DELETE_FUN\"\r\n                    >删除功能</a-menu-item\r\n                  >\r\n                </template>\r\n              </a-menu>\r\n            </template>\r\n          </a-dropdown>\r\n        </template>\r\n      </a-tree>\r\n    </a-layout-sider>\r\n    <a-layout-content class=\"a-layout-content\">\r\n      <a-table\r\n        class=\"ant-table-striped\"\r\n        rowKey=\"id\"\r\n        :columns=\"columns\"\r\n        :data-source=\"resources\"\r\n        :rowClassName=\"\r\n          (record, index) => (index % 2 === 1 ? 'table-striped' : null)\r\n        \"\r\n        :pagination=\"pagination\"\r\n        @change=\"handleTableChange\"\r\n      >\r\n        <!-- 操作列模板 -->\r\n        <template #typeRender=\"{ record }\">\r\n          <template v-if=\"record.type == 20\"> 应用 </template>\r\n          <template v-else-if=\"record.type == 21\"> 模块 </template>\r\n          <template v-else> 功能 </template>\r\n        </template>\r\n        <!-- 自定义筛选菜单 -->\r\n        <template\r\n          #filterDropdown=\"{\r\n            setSelectedKeys,\r\n            selectedKeys,\r\n            confirm,\r\n            clearFilters,\r\n            column\r\n          }\"\r\n        >\r\n          <div style=\"padding: 8px\">\r\n            <a-input\r\n              ref=\"searchInput\"\r\n              :placeholder=\"`搜索 ${column.title}`\"\r\n              :value=\"selectedKeys[0]\"\r\n              style=\"width: 188px; margin-bottom: 8px; display: block\"\r\n              @change=\"\r\n                (e) => setSelectedKeys(e.target.value ? [e.target.value] : [])\r\n              \"\r\n              @pressEnter=\"\r\n                handleSearch(selectedKeys, confirm, column.dataIndex)\r\n              \"\r\n            />\r\n            <a-button\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              style=\"width: 90px; margin-right: 8px\"\r\n              @click=\"handleSearch(selectedKeys, confirm, column.dataIndex)\"\r\n            >\r\n              <template #icon><SearchOutlined /></template>\r\n              Search\r\n            </a-button>\r\n            <a-button\r\n              size=\"small\"\r\n              style=\"width: 90px\"\r\n              @click=\"handleReset(clearFilters)\"\r\n            >\r\n              Reset\r\n            </a-button>\r\n          </div>\r\n        </template>\r\n        <template #filterIcon=\"filtered\">\r\n          <search-outlined\r\n            :style=\"{ color: filtered ? '#108ee9' : undefined }\"\r\n          />\r\n        </template>\r\n        <template #name=\"{ text, column }\">\r\n          <span v-if=\"searchText && searchedColumn === column.dataIndex\">\r\n            <template\r\n              v-for=\"(fragment, i) in text\r\n                .toString()\r\n                .split(new RegExp(`(?<=${searchText})|(?=${searchText})`, 'i'))\"\r\n            >\r\n              <mark\r\n                v-if=\"fragment.toLowerCase() === searchText.toLowerCase()\"\r\n                class=\"highlight\"\r\n                :key=\"i\"\r\n              >\r\n                {{ fragment }}\r\n              </mark>\r\n              <template v-else>{{ fragment }}</template>\r\n            </template>\r\n          </span>\r\n          <template v-else>\r\n            {{ text }}\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </a-layout-content>\r\n  </a-layout>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { ref, unref } from 'vue'\r\nimport { Options, Vue } from 'vue-class-component'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { TreeDataItem, SelectEvent } from 'ant-design-vue/es/tree/Tree'\r\nimport { SearchOutlined } from '@ant-design/icons-vue'\r\nimport {\r\n  TableState,\r\n  TableStateFilters\r\n} from 'ant-design-vue/es/table/interface'\r\nimport { TreeNode } from '@/types/TreeNode'\r\nimport request from '@/request/ResRequest'\r\nimport Pageable from '@/types/Pageable'\r\nimport ResourceForm from './ResourceForm.vue'\r\nimport { Resource } from '@/types/Resource'\r\nimport { TreeNodeType } from '@/types/TreeNodeType'\r\n// 右键菜单键\r\nenum ContextMenuKeys {\r\n  // 新增应用\r\n  ADD_APP,\r\n  // 新增模块\r\n  ADD_MOD,\r\n  // 新增功能\r\n  ADD_FUN,\r\n  // 更新应用\r\n  UPDATE_APP,\r\n  // 更新模块\r\n  UPDATE_MOD,\r\n  // 更新功能\r\n  UPDATE_FUN,\r\n  // 删除应用\r\n  DELETE_APP,\r\n  // 删除单位\r\n  DELETE_MOD,\r\n  // 删除功能\r\n  DELETE_FUN\r\n}\r\n// 分页数据类型\r\ntype Pagination = TableState['pagination']\r\n// 排序映射\r\nconst orderMap: { [key: string]: string } = {\r\n  ascend: 'ASC',\r\n  descend: 'DESC'\r\n}\r\n@Options({\r\n  components: {\r\n    SearchOutlined\r\n  }\r\n})\r\nexport default class ResourceVue extends Vue {\r\n  // 权限树数据源\r\n  treeData: TreeDataItem[] = []\r\n  // 右键菜单KEY定义\r\n  contextMenuKeys = ContextMenuKeys\r\n  // 节点类型引用\r\n  // treeNodeType = TreeNodeType\r\n\r\n  // 权限列定义\r\n  columns = [\r\n    {\r\n      title: '序号',\r\n      dataIndex: 'number',\r\n      width: 100,\r\n      customRender: (info: {\r\n        text: string;\r\n        record: Resource;\r\n        index: number;\r\n      }) => {\r\n        return (this.pageable.curr - 1) * this.pageable.size + info.index + 1\r\n      }\r\n    },\r\n    {\r\n      title: '名称',\r\n      dataIndex: 'name',\r\n      width: 220,\r\n      slots: {\r\n        filterDropdown: 'filterDropdown',\r\n        filterIcon: 'filterIcon',\r\n        customRender: 'name'\r\n      },\r\n      onFilterDropdownVisibleChange: (visible: boolean) => {\r\n        if (visible) {\r\n          setTimeout(() => {\r\n            const searchInput = unref(this.searchInput)\r\n            searchInput && searchInput.focus()\r\n          }, 0)\r\n        }\r\n      }\r\n    },\r\n    { title: '类别', dataIndex: 'type', width: 200, slots: { customRender: 'typeRender' } },\r\n    { title: '编码', dataIndex: 'permission', width: 200 },\r\n    { title: '地址', dataIndex: 'url' },\r\n    {\r\n      title: '创建时间',\r\n      dataIndex: 'createTime',\r\n      width: 200,\r\n      sorter: true,\r\n      key: 'create_time'\r\n    }\r\n  ]\r\n\r\n  // 表格数据\r\n  resources: Resource[] = []\r\n\r\n  // 搜索\r\n  searchInput = ref<HTMLInputElement>()\r\n  searchText = ''\r\n  searchedColumn = ''\r\n\r\n  // 分页参数定义\r\n  pagination = {\r\n    total: 200,\r\n    current: 1,\r\n    pageSize: 10\r\n  }\r\n\r\n  // 分页条件\r\n  pageable: Pageable = {\r\n    curr: this.pagination.current,\r\n    size: this.pagination.pageSize,\r\n    condition: {}\r\n  }\r\n\r\n  /**\r\n   * 页面挂载后\r\n   */\r\n  async mounted() {\r\n    // 加载组织机构根节点\r\n    const ret = await request.listNodes({})\r\n    if (ret.code !== 0) {\r\n      message.error(ret.msg)\r\n      return false\r\n    }\r\n    this.treeData = this.toTreeDataItem(ret.data)\r\n    // 加载列表\r\n    this.pageQuery()\r\n  }\r\n\r\n  /**\r\n   * 加载节点数据\r\n   */\r\n  onLoadData(treeNode: TreeDataItem) {\r\n    return new Promise((resolve: (value?: unknown) => void) => {\r\n      if (treeNode.dataRef.children) {\r\n        resolve()\r\n        return false\r\n      }\r\n      const params = {\r\n        parentId: treeNode.dataRef.rawId,\r\n        parentType: treeNode.dataRef.type\r\n      }\r\n      request.listNodes(params).then((ret) => {\r\n        treeNode.dataRef.children = this.toTreeDataItem(ret.data)\r\n        this.treeData = [...this.treeData]\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  // 节点点击事件\r\n  onSelect(selectedKeys: string[], info: SelectEvent) {\r\n    console.log(selectedKeys, info)\r\n    this.pageable.condition.code = info.node.dataRef.code\r\n    this.pageQuery()\r\n  }\r\n\r\n  // 右键菜单\r\n  onContextMenuClick(node: TreeDataItem & {}, menuKey: ContextMenuKeys) {\r\n    if (ContextMenuKeys.DELETE_APP === menuKey ||\r\n        ContextMenuKeys.DELETE_MOD === menuKey ||\r\n        ContextMenuKeys.DELETE_FUN === menuKey) {\r\n        Modal.confirm({\r\n        title: `您确定要删除<${node.title}>吗?`,\r\n        okType: 'danger',\r\n        onOk: () => {\r\n          request\r\n            .delete(node.key as number)\r\n            .then((res) => {\r\n              if (res.code === 0) {\r\n                message.success('删除成功')\r\n                this.loop(\r\n                  this.treeData,\r\n                  node.key as string,\r\n                  (item, index, arr) => {\r\n                    arr.splice(index, 1)\r\n                  }\r\n                )\r\n              } else {\r\n                message.error('删除失败:' + res.msg)\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              message.error(err.message)\r\n            })\r\n        }\r\n      })\r\n      return false\r\n    }\r\n    // 标题\r\n    const titleMap = new Map([\r\n      [ContextMenuKeys.ADD_APP, '新建应用'],\r\n      [ContextMenuKeys.ADD_MOD, '新建模块'],\r\n      [ContextMenuKeys.ADD_FUN, '新建功能'],\r\n      [ContextMenuKeys.UPDATE_APP, '更新应用'],\r\n      [ContextMenuKeys.UPDATE_MOD, '更新模块']\r\n    ])\r\n    // 参数\r\n    const params: {\r\n      id?: number;\r\n      type?: number;\r\n      parentId?: number;\r\n      parentType?: number;\r\n      parentName?: string;\r\n    } = {\r\n      id: node.rawId,\r\n      parentId: node.rawId,\r\n      parentType: node.type,\r\n      parentName: node.title as string\r\n    }\r\n    switch (menuKey) {\r\n      case ContextMenuKeys.ADD_APP:\r\n        params.type = TreeNodeType.APP\r\n        delete params.id\r\n        break\r\n      case ContextMenuKeys.ADD_MOD:\r\n        params.type = TreeNodeType.MODULE\r\n        delete params.id\r\n        break\r\n      case ContextMenuKeys.ADD_FUN:\r\n        params.type = TreeNodeType.FUNCTION\r\n        delete params.id\r\n        break\r\n      case ContextMenuKeys.UPDATE_APP:\r\n      case ContextMenuKeys.UPDATE_MOD:\r\n      case ContextMenuKeys.UPDATE_FUN:\r\n        delete params.parentId\r\n        delete params.parentType\r\n        delete params.parentName\r\n        break\r\n      default:\r\n        console.log(menuKey)\r\n        break\r\n    }\r\n    this.$dialog({\r\n      title: titleMap.get(menuKey),\r\n      width: 550,\r\n      height: 650,\r\n      content: {\r\n        handle: true,\r\n        props: params,\r\n        component: ResourceForm\r\n      },\r\n      ok: (args: unknown[]) => {\r\n        const data = args[0] as Resource\r\n        const key = `${data.type}_${data.id}`\r\n        const pKey = `${data.parentType}_${data.parentId}`\r\n        // 更新\r\n        if (node.key === key) {\r\n          node.dataRef.title = data.name\r\n        } else if (node.key === pKey) {\r\n          if (node.dataRef.children) {\r\n              node.dataRef.children.push(this.toTreeDataItemOne(data))\r\n          } else {\r\n              this.onLoadData(node)\r\n          }\r\n        } else {\r\n          console.log('添加成功', data)\r\n        }\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  /** 转换树节点数据 */\r\n  toTreeDataItem(nodes: TreeNode[]) {\r\n    return nodes.map((node) => {\r\n      return {\r\n        key: node.id,\r\n        rawId: node.rawId,\r\n        type: node.type,\r\n        title: node.name,\r\n        code: node.code,\r\n        isLeaf: node.type === TreeNodeType.FUNCTION\r\n      } as TreeDataItem\r\n    })\r\n  }\r\n\r\n  toTreeDataItemOne(record: Resource) {\r\n    return {\r\n      key: `${record.type}_${record.id}`,\r\n      rawId: record.id,\r\n      type: record.type,\r\n      title: record.name,\r\n      code: record.code,\r\n      isLeaf: record.type === TreeNodeType.FUNCTION // 功能节点为叶子节点\r\n    } as TreeDataItem\r\n  }\r\n\r\n  // 查询树节点\r\n  loop(\r\n    data: TreeDataItem[],\r\n    key: string,\r\n    callback: (item: TreeDataItem, index: number, arr: TreeDataItem[]) => void\r\n  ) {\r\n    data.forEach((item, index, arr) => {\r\n      if (item.key === key) {\r\n        return callback(item, index, arr)\r\n      }\r\n      if (item.children) {\r\n        return this.loop(item.children, key, callback)\r\n      }\r\n    })\r\n  }\r\n\r\n  // 分页查询资源列表\r\n  async pageQuery() {\r\n    const result = await request.pageList(this.pageable)\r\n    if (result.code === 0) {\r\n      this.resources = result.data.data\r\n      this.pagination.total = result.data.count\r\n    } else {\r\n      message.error(result.msg)\r\n    }\r\n  }\r\n\r\n  // 表格变动监听\r\n  handleTableChange(\r\n    pag: Pagination,\r\n    filters: TableStateFilters,\r\n    sorter: { field: string; order: string; columnKey: string }\r\n  ) {\r\n    this.pagination.current = pag?.current || 1\r\n    this.pageable.sortField = sorter.columnKey || ''\r\n    this.pageable.sortOrder = orderMap[sorter.order] || ''\r\n    this.pageable.condition.name =\r\n      filters.name instanceof Array ? filters.name[0] : ''\r\n    this.pageQuery()\r\n  }\r\n\r\n  /** 列表搜索 */\r\n  handleSearch(selectedKeys: string[], confirm: Function, dataIndex: string) {\r\n    confirm()\r\n    this.searchText = selectedKeys[0] || ''\r\n    this.searchedColumn = dataIndex\r\n  }\r\n\r\n  /** 查询条件重置 */\r\n  handleReset(clearFilters: Function) {\r\n    clearFilters()\r\n    this.searchText = ''\r\n  }\r\n\r\n  /** 删除权限 */\r\n  async onResourceDel(record: Resource) {\r\n    const ret = await request.delete(record.id as number)\r\n    if (ret.code === 0) {\r\n      this.pageQuery()\r\n    } else {\r\n      message.error(`删除失败:${ret.msg}`)\r\n    }\r\n  }\r\n\r\n  // 编辑权限\r\n  onResourceEdit(resource: Resource) {\r\n    this.$dialog({\r\n      title: '权限编辑',\r\n      width: 550,\r\n      height: 650,\r\n      max: false,\r\n      content: {\r\n        handle: true,\r\n        component: ResourceForm,\r\n        props: { id: resource.id }\r\n      },\r\n      ok: () => {\r\n        this.pageQuery()\r\n        return true\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.a-layout {\r\n  height: 100%;\r\n}\r\n.a-layout-sider {\r\n  width: 250px;\r\n  overflow: auto;\r\n  background-color: #fff;\r\n}\r\n.a-layout-content {\r\n  padding: 5px 2px;\r\n  overflow: auto;\r\n}\r\n.highlight {\r\n  background-color: rgb(255, 192, 105);\r\n  padding: 0px;\r\n}\r\n</style>\r\n","<template>\r\n  <a-form\r\n    ref=\"formRef\"\r\n    :colon=\"false\"\r\n    :model=\"formData\"\r\n    :rules=\"rules\"\r\n    :label-col=\"{ span: 4 }\"\r\n    :wrapper-col=\"{ span: 18 }\"\r\n    style=\"margin-top: 15px\"\r\n  >\r\n    <a-form-item label=\"图标\" name=\"icon\" class=\"icon-item\">\r\n      <a-upload\r\n        name=\"file\"\r\n        :data=\"iconData\"\r\n        list-type=\"picture-card\"\r\n        class=\"icon-uploader\"\r\n        :show-upload-list=\"false\"\r\n        action=\"/file/upload\"\r\n        :withCredentials=\"true\"\r\n        @change=\"handleUploadChange\"\r\n        :before-upload=\"beforeUpload\"\r\n      >\r\n        <img :key=\"iconKey\" v-if=\"formData.icon\" :src=\"iconUrl\" alt=\"图标\" />\r\n        <div v-else>\r\n          <loading-outlined v-if=\"iconLoading\"></loading-outlined>\r\n          <plus-outlined v-else></plus-outlined>\r\n          <div class=\"ant-upload-text\">上传</div>\r\n        </div>\r\n      </a-upload>\r\n    </a-form-item>\r\n    <a-form-item label=\"名称\" name=\"name\">\r\n      <a-input v-model:value=\"formData.name\" />\r\n    </a-form-item>\r\n    <a-form-item label=\"编码\" name=\"permission\">\r\n      <a-input v-model:value=\"formData.permission\" />\r\n    </a-form-item>\r\n    <a-form-item label=\"地址\" name=\"url\">\r\n      <a-input v-model:value=\"formData.url\" />\r\n    </a-form-item>\r\n    <a-form-item label=\"备注\" name=\"remark\">\r\n      <a-input v-model:value=\"formData.remark\" />\r\n    </a-form-item>\r\n    <a-form-item label=\"通用权限\" name=\"common\">\r\n      <a-switch v-model:checked=\"formData.common\" />\r\n    </a-form-item>\r\n    <a-form-item :wrapper-col=\"{ span: 14, offset: 4 }\">\r\n      <a-button type=\"primary\" @click=\"onSubmit\">提交</a-button>\r\n      <a-button style=\"margin-left: 10px\" @click=\"onCancel\">取消</a-button>\r\n    </a-form-item>\r\n  </a-form>\r\n</template>\r\n<script lang=\"ts\">\r\nimport Dialog from '@/components/Dialog.vue'\r\nimport { Resource } from '@/types/Resource'\r\nimport { PropType, ref, toRaw, unref } from '@vue/runtime-core'\r\nimport { Options, Vue } from 'vue-class-component'\r\nimport { message } from 'ant-design-vue'\r\nimport request from '@/request/ResRequest'\r\nimport { ValidateErrorEntity } from 'ant-design-vue/es/form/interface'\r\nimport { R } from '@/types/R'\r\nimport {\r\n  UserOutlined,\r\n  LockOutlined,\r\n  MobileOutlined,\r\n  MailOutlined,\r\n  PlusOutlined,\r\n  LoadingOutlined\r\n} from '@ant-design/icons-vue'\r\n\r\ninterface FileItem {\r\n  uid: string;\r\n  name?: string;\r\n  status?: string;\r\n  response?: R<any>;\r\n  url?: string;\r\n  type?: string;\r\n  size: number;\r\n  originFileObj: any;\r\n}\r\n\r\ninterface FileInfo {\r\n  file: FileItem;\r\n  fileList: FileItem[];\r\n}\r\n@Options({\r\n  components: {\r\n    UserOutlined,\r\n    LockOutlined,\r\n    MobileOutlined,\r\n    MailOutlined,\r\n    PlusOutlined,\r\n    LoadingOutlined\r\n  },\r\n  props: {\r\n    id: {\r\n      type: Number\r\n    },\r\n    type: {\r\n      type: Number\r\n    },\r\n    parentId: {\r\n      type: Number\r\n    },\r\n    parentType: {\r\n      type: Number\r\n    },\r\n    parentName: {\r\n      type: String\r\n    },\r\n    dialog: Object as PropType<Dialog>\r\n  }\r\n})\r\nexport default class ResourceForm extends Vue {\r\n  // 节点ID\r\n  id!: number\r\n  // 节点类型\r\n  type!: number\r\n  // 父级节点\r\n  parentId!: number\r\n  parentType!: number\r\n  parentName!: string\r\n  // 当前弹框\r\n  dialog!: Dialog\r\n  // 表单数据\r\n  formData: Resource = {\r\n    id: this.id,\r\n    type: this.type,\r\n    parentId: this.parentId,\r\n    parentType: this.parentType\r\n  }\r\n\r\n  // 表单引用\r\n  formRef = ref<AntType.Form>()\r\n  // 验证规则\r\n  rules = {\r\n    name: [{ required: true, message: '请输入名称', trigger: 'blur' }, { max: 10, message: '名称最多10个字符' }],\r\n    permission: [{ required: true, message: '请输入编码', trigger: 'blur' }, { max: 50, message: '编码最多20个字符' }],\r\n    url: [{ max: 255, message: '地址最多255个字符' }],\r\n    remark: [{ max: 50, message: '备注信息最多50个字符' }]\r\n  }\r\n\r\n  // 图标相关\r\n  iconKey = Math.random()\r\n  // 头像上传标志\r\n  iconLoading = false\r\n  // 用户头像地址\r\n  get iconUrl() {\r\n    return `/file/download/thumb/${this.formData.icon}`\r\n  }\r\n\r\n  // 上传头像数据\r\n  get iconData() {\r\n    return { objectName: this.formData.icon || '' }\r\n  }\r\n\r\n  // 头像上传前回调\r\n  beforeUpload(file: FileItem) {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n    if (!isJpgOrPng) {\r\n      message.error('You can only upload JPG file!')\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2\r\n    if (!isLt2M) {\r\n      message.error('Image must smaller than 2MB!')\r\n    }\r\n    return isJpgOrPng && isLt2M\r\n  }\r\n\r\n  // 上传事件\r\n  handleUploadChange = (info: FileInfo) => {\r\n    if (info.file.status === 'uploading') {\r\n      this.iconLoading = true\r\n      return false\r\n    }\r\n    this.iconLoading = false\r\n    if (info.file.status === 'done') {\r\n      if (info.file.response?.code === 0) {\r\n        this.formData.icon = info.file.response.data.objectName\r\n        this.iconKey = Math.random()\r\n      } else {\r\n        message.error(info.file.response?.msg as string)\r\n      }\r\n    }\r\n    if (info.file.status === 'error') {\r\n      message.error('上传失败')\r\n    }\r\n  }\r\n\r\n  async mounted() {\r\n    // 加载当前节点\r\n    if (this.id) {\r\n      const ret = await request.find(this.id)\r\n      if (ret.code === 0) {\r\n        this.formData = {\r\n          ...this.formData,\r\n          ...ret.data\r\n        }\r\n      } else {\r\n        message.error(ret.msg)\r\n      }\r\n    }\r\n  }\r\n\r\n  // 保存\r\n  onSubmit() {\r\n    const formUnref = unref(this.formRef)\r\n    formUnref &&\r\n      formUnref\r\n        .validate()\r\n        .then(async () => {\r\n          const data = { ...toRaw(this.formData) }\r\n          let ret\r\n          if (!this.id) {\r\n            ret = await request.add(data)\r\n            data.id = ret.data\r\n          } else {\r\n            ret = await request.update(data)\r\n          }\r\n          if (ret.code !== 0) {\r\n            message.error(`错误:${ret.msg}`)\r\n          } else {\r\n            this.dialog._ok(data)\r\n          }\r\n        })\r\n        .catch((error: ValidateErrorEntity<Resource>) => {\r\n          console.log('error', error)\r\n        })\r\n  }\r\n\r\n  // 取消\r\n  onCancel() {\r\n    this.dialog._close()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.icon-item ::v-deep(.ant-form-item-label){\r\n    line-height: 104px;\r\n}\r\n.icon-item ::v-deep(.ant-form-item-control){\r\n    line-height: inherit;\r\n}\r\n::v-deep(.ant-upload-select-picture-card){\r\n    margin-bottom: 0px;\r\n}\r\n</style>\r\n","\r\nimport Dialog from '@/components/Dialog.vue'\r\nimport { Resource } from '@/types/Resource'\r\nimport { PropType, ref, toRaw, unref } from '@vue/runtime-core'\r\nimport { Options, Vue } from 'vue-class-component'\r\nimport { message } from 'ant-design-vue'\r\nimport request from '@/request/ResRequest'\r\nimport { ValidateErrorEntity } from 'ant-design-vue/es/form/interface'\r\nimport { R } from '@/types/R'\r\nimport {\r\n  UserOutlined,\r\n  LockOutlined,\r\n  MobileOutlined,\r\n  MailOutlined,\r\n  PlusOutlined,\r\n  LoadingOutlined\r\n} from '@ant-design/icons-vue'\r\n\r\ninterface FileItem {\r\n  uid: string;\r\n  name?: string;\r\n  status?: string;\r\n  response?: R<any>;\r\n  url?: string;\r\n  type?: string;\r\n  size: number;\r\n  originFileObj: any;\r\n}\r\n\r\ninterface FileInfo {\r\n  file: FileItem;\r\n  fileList: FileItem[];\r\n}\r\n@Options({\r\n  components: {\r\n    UserOutlined,\r\n    LockOutlined,\r\n    MobileOutlined,\r\n    MailOutlined,\r\n    PlusOutlined,\r\n    LoadingOutlined\r\n  },\r\n  props: {\r\n    id: {\r\n      type: Number\r\n    },\r\n    type: {\r\n      type: Number\r\n    },\r\n    parentId: {\r\n      type: Number\r\n    },\r\n    parentType: {\r\n      type: Number\r\n    },\r\n    parentName: {\r\n      type: String\r\n    },\r\n    dialog: Object as PropType<Dialog>\r\n  }\r\n})\r\nexport default class ResourceForm extends Vue {\r\n  // 节点ID\r\n  id!: number\r\n  // 节点类型\r\n  type!: number\r\n  // 父级节点\r\n  parentId!: number\r\n  parentType!: number\r\n  parentName!: string\r\n  // 当前弹框\r\n  dialog!: Dialog\r\n  // 表单数据\r\n  formData: Resource = {\r\n    id: this.id,\r\n    type: this.type,\r\n    parentId: this.parentId,\r\n    parentType: this.parentType\r\n  }\r\n\r\n  // 表单引用\r\n  formRef = ref<AntType.Form>()\r\n  // 验证规则\r\n  rules = {\r\n    name: [{ required: true, message: '请输入名称', trigger: 'blur' }, { max: 10, message: '名称最多10个字符' }],\r\n    permission: [{ required: true, message: '请输入编码', trigger: 'blur' }, { max: 50, message: '编码最多20个字符' }],\r\n    url: [{ max: 255, message: '地址最多255个字符' }],\r\n    remark: [{ max: 50, message: '备注信息最多50个字符' }]\r\n  }\r\n\r\n  // 图标相关\r\n  iconKey = Math.random()\r\n  // 头像上传标志\r\n  iconLoading = false\r\n  // 用户头像地址\r\n  get iconUrl() {\r\n    return `/file/download/thumb/${this.formData.icon}`\r\n  }\r\n\r\n  // 上传头像数据\r\n  get iconData() {\r\n    return { objectName: this.formData.icon || '' }\r\n  }\r\n\r\n  // 头像上传前回调\r\n  beforeUpload(file: FileItem) {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n    if (!isJpgOrPng) {\r\n      message.error('You can only upload JPG file!')\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2\r\n    if (!isLt2M) {\r\n      message.error('Image must smaller than 2MB!')\r\n    }\r\n    return isJpgOrPng && isLt2M\r\n  }\r\n\r\n  // 上传事件\r\n  handleUploadChange = (info: FileInfo) => {\r\n    if (info.file.status === 'uploading') {\r\n      this.iconLoading = true\r\n      return false\r\n    }\r\n    this.iconLoading = false\r\n    if (info.file.status === 'done') {\r\n      if (info.file.response?.code === 0) {\r\n        this.formData.icon = info.file.response.data.objectName\r\n        this.iconKey = Math.random()\r\n      } else {\r\n        message.error(info.file.response?.msg as string)\r\n      }\r\n    }\r\n    if (info.file.status === 'error') {\r\n      message.error('上传失败')\r\n    }\r\n  }\r\n\r\n  async mounted() {\r\n    // 加载当前节点\r\n    if (this.id) {\r\n      const ret = await request.find(this.id)\r\n      if (ret.code === 0) {\r\n        this.formData = {\r\n          ...this.formData,\r\n          ...ret.data\r\n        }\r\n      } else {\r\n        message.error(ret.msg)\r\n      }\r\n    }\r\n  }\r\n\r\n  // 保存\r\n  onSubmit() {\r\n    const formUnref = unref(this.formRef)\r\n    formUnref &&\r\n      formUnref\r\n        .validate()\r\n        .then(async () => {\r\n          const data = { ...toRaw(this.formData) }\r\n          let ret\r\n          if (!this.id) {\r\n            ret = await request.add(data)\r\n            data.id = ret.data\r\n          } else {\r\n            ret = await request.update(data)\r\n          }\r\n          if (ret.code !== 0) {\r\n            message.error(`错误:${ret.msg}`)\r\n          } else {\r\n            this.dialog._ok(data)\r\n          }\r\n        })\r\n        .catch((error: ValidateErrorEntity<Resource>) => {\r\n          console.log('error', error)\r\n        })\r\n  }\r\n\r\n  // 取消\r\n  onCancel() {\r\n    this.dialog._close()\r\n  }\r\n}\r\n","import { render } from \"./ResourceForm.vue?vue&type=template&id=78e94540&scoped=true\"\nimport script from \"./ResourceForm.vue?vue&type=script&lang=ts\"\nexport * from \"./ResourceForm.vue?vue&type=script&lang=ts\"\n\nimport \"./ResourceForm.vue?vue&type=style&index=0&id=78e94540&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-78e94540\"\n\nexport default script","\r\nimport { ref, unref } from 'vue'\r\nimport { Options, Vue } from 'vue-class-component'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { TreeDataItem, SelectEvent } from 'ant-design-vue/es/tree/Tree'\r\nimport { SearchOutlined } from '@ant-design/icons-vue'\r\nimport {\r\n  TableState,\r\n  TableStateFilters\r\n} from 'ant-design-vue/es/table/interface'\r\nimport { TreeNode } from '@/types/TreeNode'\r\nimport request from '@/request/ResRequest'\r\nimport Pageable from '@/types/Pageable'\r\nimport ResourceForm from './ResourceForm.vue'\r\nimport { Resource } from '@/types/Resource'\r\nimport { TreeNodeType } from '@/types/TreeNodeType'\r\n// 右键菜单键\r\nenum ContextMenuKeys {\r\n  // 新增应用\r\n  ADD_APP,\r\n  // 新增模块\r\n  ADD_MOD,\r\n  // 新增功能\r\n  ADD_FUN,\r\n  // 更新应用\r\n  UPDATE_APP,\r\n  // 更新模块\r\n  UPDATE_MOD,\r\n  // 更新功能\r\n  UPDATE_FUN,\r\n  // 删除应用\r\n  DELETE_APP,\r\n  // 删除单位\r\n  DELETE_MOD,\r\n  // 删除功能\r\n  DELETE_FUN\r\n}\r\n// 分页数据类型\r\ntype Pagination = TableState['pagination']\r\n// 排序映射\r\nconst orderMap: { [key: string]: string } = {\r\n  ascend: 'ASC',\r\n  descend: 'DESC'\r\n}\r\n@Options({\r\n  components: {\r\n    SearchOutlined\r\n  }\r\n})\r\nexport default class ResourceVue extends Vue {\r\n  // 权限树数据源\r\n  treeData: TreeDataItem[] = []\r\n  // 右键菜单KEY定义\r\n  contextMenuKeys = ContextMenuKeys\r\n  // 节点类型引用\r\n  // treeNodeType = TreeNodeType\r\n\r\n  // 权限列定义\r\n  columns = [\r\n    {\r\n      title: '序号',\r\n      dataIndex: 'number',\r\n      width: 100,\r\n      customRender: (info: {\r\n        text: string;\r\n        record: Resource;\r\n        index: number;\r\n      }) => {\r\n        return (this.pageable.curr - 1) * this.pageable.size + info.index + 1\r\n      }\r\n    },\r\n    {\r\n      title: '名称',\r\n      dataIndex: 'name',\r\n      width: 220,\r\n      slots: {\r\n        filterDropdown: 'filterDropdown',\r\n        filterIcon: 'filterIcon',\r\n        customRender: 'name'\r\n      },\r\n      onFilterDropdownVisibleChange: (visible: boolean) => {\r\n        if (visible) {\r\n          setTimeout(() => {\r\n            const searchInput = unref(this.searchInput)\r\n            searchInput && searchInput.focus()\r\n          }, 0)\r\n        }\r\n      }\r\n    },\r\n    { title: '类别', dataIndex: 'type', width: 200, slots: { customRender: 'typeRender' } },\r\n    { title: '编码', dataIndex: 'permission', width: 200 },\r\n    { title: '地址', dataIndex: 'url' },\r\n    {\r\n      title: '创建时间',\r\n      dataIndex: 'createTime',\r\n      width: 200,\r\n      sorter: true,\r\n      key: 'create_time'\r\n    }\r\n  ]\r\n\r\n  // 表格数据\r\n  resources: Resource[] = []\r\n\r\n  // 搜索\r\n  searchInput = ref<HTMLInputElement>()\r\n  searchText = ''\r\n  searchedColumn = ''\r\n\r\n  // 分页参数定义\r\n  pagination = {\r\n    total: 200,\r\n    current: 1,\r\n    pageSize: 10\r\n  }\r\n\r\n  // 分页条件\r\n  pageable: Pageable = {\r\n    curr: this.pagination.current,\r\n    size: this.pagination.pageSize,\r\n    condition: {}\r\n  }\r\n\r\n  /**\r\n   * 页面挂载后\r\n   */\r\n  async mounted() {\r\n    // 加载组织机构根节点\r\n    const ret = await request.listNodes({})\r\n    if (ret.code !== 0) {\r\n      message.error(ret.msg)\r\n      return false\r\n    }\r\n    this.treeData = this.toTreeDataItem(ret.data)\r\n    // 加载列表\r\n    this.pageQuery()\r\n  }\r\n\r\n  /**\r\n   * 加载节点数据\r\n   */\r\n  onLoadData(treeNode: TreeDataItem) {\r\n    return new Promise((resolve: (value?: unknown) => void) => {\r\n      if (treeNode.dataRef.children) {\r\n        resolve()\r\n        return false\r\n      }\r\n      const params = {\r\n        parentId: treeNode.dataRef.rawId,\r\n        parentType: treeNode.dataRef.type\r\n      }\r\n      request.listNodes(params).then((ret) => {\r\n        treeNode.dataRef.children = this.toTreeDataItem(ret.data)\r\n        this.treeData = [...this.treeData]\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  // 节点点击事件\r\n  onSelect(selectedKeys: string[], info: SelectEvent) {\r\n    console.log(selectedKeys, info)\r\n    this.pageable.condition.code = info.node.dataRef.code\r\n    this.pageQuery()\r\n  }\r\n\r\n  // 右键菜单\r\n  onContextMenuClick(node: TreeDataItem & {}, menuKey: ContextMenuKeys) {\r\n    if (ContextMenuKeys.DELETE_APP === menuKey ||\r\n        ContextMenuKeys.DELETE_MOD === menuKey ||\r\n        ContextMenuKeys.DELETE_FUN === menuKey) {\r\n        Modal.confirm({\r\n        title: `您确定要删除<${node.title}>吗?`,\r\n        okType: 'danger',\r\n        onOk: () => {\r\n          request\r\n            .delete(node.key as number)\r\n            .then((res) => {\r\n              if (res.code === 0) {\r\n                message.success('删除成功')\r\n                this.loop(\r\n                  this.treeData,\r\n                  node.key as string,\r\n                  (item, index, arr) => {\r\n                    arr.splice(index, 1)\r\n                  }\r\n                )\r\n              } else {\r\n                message.error('删除失败:' + res.msg)\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              message.error(err.message)\r\n            })\r\n        }\r\n      })\r\n      return false\r\n    }\r\n    // 标题\r\n    const titleMap = new Map([\r\n      [ContextMenuKeys.ADD_APP, '新建应用'],\r\n      [ContextMenuKeys.ADD_MOD, '新建模块'],\r\n      [ContextMenuKeys.ADD_FUN, '新建功能'],\r\n      [ContextMenuKeys.UPDATE_APP, '更新应用'],\r\n      [ContextMenuKeys.UPDATE_MOD, '更新模块']\r\n    ])\r\n    // 参数\r\n    const params: {\r\n      id?: number;\r\n      type?: number;\r\n      parentId?: number;\r\n      parentType?: number;\r\n      parentName?: string;\r\n    } = {\r\n      id: node.rawId,\r\n      parentId: node.rawId,\r\n      parentType: node.type,\r\n      parentName: node.title as string\r\n    }\r\n    switch (menuKey) {\r\n      case ContextMenuKeys.ADD_APP:\r\n        params.type = TreeNodeType.APP\r\n        delete params.id\r\n        break\r\n      case ContextMenuKeys.ADD_MOD:\r\n        params.type = TreeNodeType.MODULE\r\n        delete params.id\r\n        break\r\n      case ContextMenuKeys.ADD_FUN:\r\n        params.type = TreeNodeType.FUNCTION\r\n        delete params.id\r\n        break\r\n      case ContextMenuKeys.UPDATE_APP:\r\n      case ContextMenuKeys.UPDATE_MOD:\r\n      case ContextMenuKeys.UPDATE_FUN:\r\n        delete params.parentId\r\n        delete params.parentType\r\n        delete params.parentName\r\n        break\r\n      default:\r\n        console.log(menuKey)\r\n        break\r\n    }\r\n    this.$dialog({\r\n      title: titleMap.get(menuKey),\r\n      width: 550,\r\n      height: 650,\r\n      content: {\r\n        handle: true,\r\n        props: params,\r\n        component: ResourceForm\r\n      },\r\n      ok: (args: unknown[]) => {\r\n        const data = args[0] as Resource\r\n        const key = `${data.type}_${data.id}`\r\n        const pKey = `${data.parentType}_${data.parentId}`\r\n        // 更新\r\n        if (node.key === key) {\r\n          node.dataRef.title = data.name\r\n        } else if (node.key === pKey) {\r\n          if (node.dataRef.children) {\r\n              node.dataRef.children.push(this.toTreeDataItemOne(data))\r\n          } else {\r\n              this.onLoadData(node)\r\n          }\r\n        } else {\r\n          console.log('添加成功', data)\r\n        }\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  /** 转换树节点数据 */\r\n  toTreeDataItem(nodes: TreeNode[]) {\r\n    return nodes.map((node) => {\r\n      return {\r\n        key: node.id,\r\n        rawId: node.rawId,\r\n        type: node.type,\r\n        title: node.name,\r\n        code: node.code,\r\n        isLeaf: node.type === TreeNodeType.FUNCTION\r\n      } as TreeDataItem\r\n    })\r\n  }\r\n\r\n  toTreeDataItemOne(record: Resource) {\r\n    return {\r\n      key: `${record.type}_${record.id}`,\r\n      rawId: record.id,\r\n      type: record.type,\r\n      title: record.name,\r\n      code: record.code,\r\n      isLeaf: record.type === TreeNodeType.FUNCTION // 功能节点为叶子节点\r\n    } as TreeDataItem\r\n  }\r\n\r\n  // 查询树节点\r\n  loop(\r\n    data: TreeDataItem[],\r\n    key: string,\r\n    callback: (item: TreeDataItem, index: number, arr: TreeDataItem[]) => void\r\n  ) {\r\n    data.forEach((item, index, arr) => {\r\n      if (item.key === key) {\r\n        return callback(item, index, arr)\r\n      }\r\n      if (item.children) {\r\n        return this.loop(item.children, key, callback)\r\n      }\r\n    })\r\n  }\r\n\r\n  // 分页查询资源列表\r\n  async pageQuery() {\r\n    const result = await request.pageList(this.pageable)\r\n    if (result.code === 0) {\r\n      this.resources = result.data.data\r\n      this.pagination.total = result.data.count\r\n    } else {\r\n      message.error(result.msg)\r\n    }\r\n  }\r\n\r\n  // 表格变动监听\r\n  handleTableChange(\r\n    pag: Pagination,\r\n    filters: TableStateFilters,\r\n    sorter: { field: string; order: string; columnKey: string }\r\n  ) {\r\n    this.pagination.current = pag?.current || 1\r\n    this.pageable.sortField = sorter.columnKey || ''\r\n    this.pageable.sortOrder = orderMap[sorter.order] || ''\r\n    this.pageable.condition.name =\r\n      filters.name instanceof Array ? filters.name[0] : ''\r\n    this.pageQuery()\r\n  }\r\n\r\n  /** 列表搜索 */\r\n  handleSearch(selectedKeys: string[], confirm: Function, dataIndex: string) {\r\n    confirm()\r\n    this.searchText = selectedKeys[0] || ''\r\n    this.searchedColumn = dataIndex\r\n  }\r\n\r\n  /** 查询条件重置 */\r\n  handleReset(clearFilters: Function) {\r\n    clearFilters()\r\n    this.searchText = ''\r\n  }\r\n\r\n  /** 删除权限 */\r\n  async onResourceDel(record: Resource) {\r\n    const ret = await request.delete(record.id as number)\r\n    if (ret.code === 0) {\r\n      this.pageQuery()\r\n    } else {\r\n      message.error(`删除失败:${ret.msg}`)\r\n    }\r\n  }\r\n\r\n  // 编辑权限\r\n  onResourceEdit(resource: Resource) {\r\n    this.$dialog({\r\n      title: '权限编辑',\r\n      width: 550,\r\n      height: 650,\r\n      max: false,\r\n      content: {\r\n        handle: true,\r\n        component: ResourceForm,\r\n        props: { id: resource.id }\r\n      },\r\n      ok: () => {\r\n        this.pageQuery()\r\n        return true\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { render } from \"./Resource.vue?vue&type=template&id=497680b9&scoped=true\"\nimport script from \"./Resource.vue?vue&type=script&lang=ts\"\nexport * from \"./Resource.vue?vue&type=script&lang=ts\"\n\nimport \"./Resource.vue?vue&type=style&index=0&id=497680b9&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-497680b9\"\n\nexport default script","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n"],"sourceRoot":""}